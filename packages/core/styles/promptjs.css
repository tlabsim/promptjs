/*
 * PromptJS – promptjs.css
 * Single public stylesheet for all visuals.
 * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)
 *
 * - Import tokens.css first for design variables (colors, spacing, motion, etc.)
 * - Defines structural classes:
 *     .pj-overlay, .pj-modal, .pj-modal-header, .pj-modal-content, .pj-modal-footer,
 *     .pj-modal-btn, .pj-toast
 * - Honors reduced-motion via CSS variables and theming via custom properties
 *
 * Customize by overriding variables in your app or extending these classes.
 */

 @import './tokens.css';

 * {
   box-sizing: border-box;
 }

.pj-overlay{ position:fixed; inset:0; background: transparent;  display:flex; align-items:center; justify-content:center; z-index:var(--pj-z-base); }
.pj-overlay.pj-blur {
  backdrop-filter: blur(var(--pj-overlay-blur, 0px));
  -webkit-backdrop-filter: blur(var(--pj-overlay-blur, 0px));
  
}
.pj-overlay::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgb(var(--pj-overlay-surface-rgb) / var(--pj-overlay-alpha, 0.5));
  opacity: 0; /* start transparent */
  z-index: calc(var(--pj-z-base) - 1);
}

.pj-modal{ background: rgb(var(--pj-modal-surface-rgb) / var(--pj-modal-alpha, 1)); color:var(--pj-fg); border:1px solid var(--pj-border); border-radius:var(--pj-radius-xl); box-shadow:0 10px 30px rgba(0,0,0,.2); }
.pj-modal, .pj-modal-no-window {max-width:var(--pj-max-w, 640px); width:calc(100% - 2rem); z-index: calc(var(--pj-z-base) + 1);}
.pj-modal-translucent { backdrop-filter: saturate(1.2) blur(var(--pj-modal-blur, 0)); border: 1px solid color-mix(in oklab, rgb(var(--pj-modal-surface-rgb)) 70%, transparent);}
.pj-modal   { will-change: opacity, transform; }

.pj-modal-header { position: relative; display:flex; padding: 0 2rem; padding-right: 4rem; border-bottom:0px solid var(--pj-border); }
.pj-modal-close {  position: absolute;  top: 8px;  right: 8px;  width: 28px;  height: 28px; padding:6px; border-radius: 8px; display: inline-flex;align-items: center; justify-content: center; border: 1px solid var(--pj-border);  background: var(--pj-muted); color: inherit; cursor: pointer; }
.pj-modal-close:hover { background: var(--pj-muted-hover); }
.pj-modal-footer{ position: relative; padding: 1rem 2rem; border-top:0px solid var(--pj-border); border-bottom:none; display:flex; gap:8px; justify-content:flex-end; font-size: .9rem;}
.pj-modal .pj-modal-content{ padding:1rem 2rem; max-height:70vh; overflow:auto; } 
.pj-modal-btn{ padding:.5rem 1.5rem; border-radius:.5rem; border:1px solid var(--pj-border); background: var(--pj-muted); color: inherit; cursor: pointer; font-size: inherit;}
.pj-modal-btn:hover { background: var(--pj-muted-hover); }
.pj-modal-btn.primary{ background:var(--pj-primary); color:#fff; border-color:transparent; }
.pad-none { padding: 0 !important; }

.pj-modal.pj-kind-info    .pj-modal-header { border-bottom-color: var(--pj-info); }
.pj-modal.pj-kind-success .pj-modal-header { border-bottom-color: var(--pj-success); }
.pj-modal.pj-kind-warning .pj-modal-header { border-bottom-color: var(--pj-warning); }
.pj-modal.pj-kind-error   .pj-modal-header { border-bottom-color: var(--pj-error); }
.pj-modal.pj-kind-question.pj-modal .pj-modal-header { border-bottom-color: var(--pj-info); }

/* When draggable enabled and header is the handle */
.pj-modal-draggable .pj-modal-header { cursor: grab; }
.pj-modal-draggable .pj-modal-header:active { cursor: grabbing; }
/* When moved, allow the compositor to optimize */
.pj-modal.pj-modal-moved { will-change: transform; }

/* More prominent accent: 
.pj-modal.pj-kind-info    { border-top: 3px solid var(--pj-info); }
.pj-modal.pj-kind-success { border-top: 3px solid var(--pj-success); }
.pj-modal.pj-kind-warning { border-top: 3px solid var(--pj-warning); }
.pj-modal.pj-kind-error   { border-top: 3px solid var(--pj-error); }
.pj-modal.pj-kind-question{ border-top: 3px solid var(--pj-info); }
*/

/* Overlay fade */
@media (prefers-reduced-motion: reduce) {
  .pj-overlay-in::after, .pj-overlay-out::after,
  .pj-modal-in, .pj-modal-out {
    animation: none !important;
  }
}

@keyframes pj-overlay-fade-in  { from { opacity: 0 } to { opacity: 1 } }
@keyframes pj-overlay-fade-out { from { opacity: 1 } to { opacity: 0 } }

.pj-overlay-in::after  { animation: pj-overlay-fade-in  var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-overlay-out::after { animation: pj-overlay-fade-out var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }

/* Modal scale + fade */
@keyframes pj-modal-in  { from { opacity: 0; transform: scale(0.96) } to { opacity: 1; transform: scale(1) } }
@keyframes pj-modal-out { from { opacity: 1; transform: scale(1) } to { opacity: 0; transform: scale(0.96) } }

.pj-modal-in  { animation: pj-modal-in  var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-modal-out { animation: pj-modal-out var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }



/* Toast layer and slots. Manager sets position/anchors inline; these are fallbacks. */
.pj-toasts { position: fixed; inset: 0; pointer-events: none; }
.pj-toast-slot { position: fixed; display: flex; flex-direction: column; gap: var(--pj-toast-gap, 10px); pointer-events: none; }
.pj-toast-slot .pj-toast { pointer-events: auto; }
.pj-toast{ position: relative; background: var(--pj-bg); color: var(--pj-fg); padding: 1rem 1.5rem; border-radius: 12px; box-shadow: var(--pj-shadow-md); min-width: 240px; max-width: min(90vw, 420px); display: inline-flex; gap: 8px; align-items: center; overflow: hidden;}
.pj-toast.dismissible { padding-right: 3rem; }
.pj-toast.has-title {  display: flex; flex-direction: column; align-items: stretch; gap: 3px;}
.pj-toast .pj-toast-title { font-weight: 700; font-size: 1rem; margin-bottom: 4px; line-height: 1.2; }
.pj-toast .pj-toast-body { flex: 1 1 auto; }
.pj-toast .pj-toast-actions { display: inline-flex; gap: 6px; margin-left: 8px; }
.pj-toast .pj-toast-close{ position: absolute; top: 50%; transform: translateY(-50%); right: 8px; margin-left: 8px; background: transparent; border: none; font-size: 16px; line-height: 1; cursor: pointer; color: inherit; display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px; padding:4px; border-radius: 8px; border: 1px solid var(--pj-border); background: var(--pj-muted); }
.pj-toast .pj-toast-close:hover { background: var(--pj-muted-hover); }
.pj-toast-item { will-change: height, margin, padding, opacity; }
.pj-toast     { will-change: transform, opacity; }

/* Kinds - overrides background color (use modern colors */
.pj-toast.pj-info { background: var(--pj-info); color: white; }
.pj-toast.pj-success { background: var(--pj-success); color: white; }
.pj-toast.pj-warning { background: var(--pj-warning); color: color-mix(in srgb, var(--pj-warning), #000 90%); }
.pj-toast.pj-error { background: var(--pj-error); color: white; }

/* Button inside toast */
/* use slight contrasted border  color and high contrast text color */
.pj-toast.pj-info  .pj-toast-close { background-color: color-mix(in srgb, var(--pj-info) 50%, #fff 50%) !important; border-color: color-mix(in srgb, var(--pj-info) 80%, #000 10%); color: color-mix(in srgb, var(--pj-info) 75%, #000 25%); }
.pj-toast.pj-success .pj-toast-close { background-color: color-mix(in srgb, var(--pj-success) 50%, #fff 50%) !important; border-color: color-mix(in srgb, var(--pj-success) 80%, #000 10%); color: color-mix(in srgb, var(--pj-success) 75%, #000 25%); }
.pj-toast.pj-warning .pj-toast-close { background-color: color-mix(in srgb, var(--pj-warning) 50%, #fff 50%) !important; border-color: color-mix(in srgb, var(--pj-warning) 80%, #000 10%); color: color-mix(in srgb, var(--pj-warning) 25%, #000 75%); }
.pj-toast.pj-error   .pj-toast-close { background-color: color-mix(in srgb, var(--pj-error) 50%, #fff 50%) !important; border-color: color-mix(in srgb, var(--pj-error) 80%, #000 10%); color: color-mix(in srgb, var(--pj-error) 60%, #000 40%); }

.pj-toast-btn{ padding:.5rem 1rem; border-radius:.5rem; background:var(--pj-muted); border: 1px solid var(--pj-border); color: inherit; }
.pj-toast-btn:hover { background: var(--pj-muted-hover); }
.pj-toast-btn.primary{ background:var(--pj-primary); color:#fff; border-color:transparent; }

/* Fade */
@keyframes pj-fade-in  { from { opacity: 0 } to { opacity: 1 } }
@keyframes pj-fade-out { from { opacity: 1 } to { opacity: 0 } }

.pj-enter-fade { animation: pj-fade-in var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-exit-fade  { animation: pj-fade-out var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }

/* Slide – use calc with a numeric sign variable to support 'edge' or short distances */
@keyframes pj-slide-in-x  { from { transform: translateX(calc(var(--pj-enter-distance, 16px) * var(--pj-sign, 1))); opacity: 0 } to { transform: translateX(0); opacity: 1 } }
@keyframes pj-slide-out-x { from { transform: translateX(0); } to { transform: translateX(calc(var(--pj-enter-distance, 16px) * var(--pj-sign, 1))); opacity: 0 } }

@keyframes pj-slide-in-y  { from { transform: translateY(calc(var(--pj-enter-distance, 16px) * var(--pj-sign, 1))); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
@keyframes pj-slide-out-y { from { transform: translateY(0); } to { transform: translateY(calc(var(--pj-enter-distance, 16px) * var(--pj-sign, 1))); opacity: 0 } }

/* Enter slide utilities */
.pj-enter-slide-left  { --pj-sign: -1; animation: pj-slide-in-x var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-enter-slide-right { --pj-sign:  1; animation: pj-slide-in-x var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-enter-slide-up    { --pj-sign: -1; animation: pj-slide-in-y var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-enter-slide-down  { --pj-sign:  1; animation: pj-slide-in-y var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }

/* Exit slide utilities */
.pj-exit-slide-left  { --pj-sign: -1; animation: pj-slide-out-x var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-exit-slide-right { --pj-sign:  1; animation: pj-slide-out-x var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-exit-slide-up    { --pj-sign: -1; animation: pj-slide-out-y var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-exit-slide-down  { --pj-sign:  1; animation: pj-slide-out-y var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }

/* Scale */
@keyframes pj-scale-in  { from { transform: scale(0.96); opacity: 0 } to { transform: scale(1); opacity: 1 } }
@keyframes pj-scale-out { from { transform: scale(1); } to { transform: scale(0.96); opacity: 0 } }

.pj-enter-scale { animation: pj-scale-in var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }
.pj-exit-scale  { animation: pj-scale-out var(--pj-anim-duration, 180ms) var(--pj-anim-ease, ease) both; }

/* Cover cue grows left-to-right across the toast background */
.pj-timeout-cover { position: absolute; inset: 0; background: var(--pj-timeout-cover); transform-origin: left center; transform: scaleX(0); pointer-events: none; animation: pj-timeout-progress-x var(--pj-timeout-ms, 0ms) linear forwards;}

/* Edge bar cue: place on chosen edge and grow along that axis */
.pj-timeout-bar { position: absolute; background: var(--pj-timeout-bar); pointer-events: none; border-radius: 9999px;}

/* horizontal bars */
.pj-timeout-bar.pj-top    { top: 0; left: 0; right: 0; height: 3px; transform-origin: left center; transform: scaleX(0); animation: pj-timeout-progress-x var(--pj-timeout-ms, 0ms) linear forwards; }
.pj-timeout-bar.pj-bottom { bottom: 0; left: 0; right: 0; height: 3px; transform-origin: left center; transform: scaleX(0); animation: pj-timeout-progress-x var(--pj-timeout-ms, 0ms) linear forwards; }

/* vertical bars */
.pj-timeout-bar.pj-left   { left: 0; top: 0; bottom: 0; width: 3px; transform-origin: center top; transform: scaleY(0); animation: pj-timeout-progress-y var(--pj-timeout-ms, 0ms) linear forwards; }
.pj-timeout-bar.pj-right  { right: 0; top: 0; bottom: 0; width: 3px; transform-origin: center top; transform: scaleY(0); animation: pj-timeout-progress-y var(--pj-timeout-ms, 0ms) linear forwards; }

/* Progress keyframes */
@keyframes pj-timeout-progress-x { from { transform: scaleX(0) } to { transform: scaleX(1) } }
@keyframes pj-timeout-progress-y { from { transform: scaleY(0) } to { transform: scaleY(1) } }


@media (prefers-reduced-motion: reduce) {
  /* Disable animated entrances/exits */
  .pj-enter-fade,
  .pj-exit-fade,
  .pj-enter-scale,
  .pj-exit-scale,
  .pj-enter-slide-left,
  .pj-enter-slide-right,
  .pj-enter-slide-up,
  .pj-enter-slide-down,
  .pj-exit-slide-left,
  .pj-exit-slide-right,
  .pj-exit-slide-up,
  .pj-exit-slide-down {
    animation-duration: 0ms !important;
    animation: none !important;
  }

  /* Keep timeout behavior but remove motion cues */
  .pj-timeout-cover,
  .pj-timeout-bar {
    animation: none !important;
    transform: none !important;
  }
}