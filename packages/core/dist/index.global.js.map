{"version":3,"sources":["../src/utils.ts","../src/config.ts","../src/modal.ts","../src/sanitize.ts","../src/manager.ts","../src/a11y.ts","../src/modal-core.ts","../src/toast.ts","../src/dialogs.ts","../src/i18n.ts","../src/index.ts"],"names":["_a","_b","_c","_d","_e","_f","_g","_h","_i"],"mappings":"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","file":"index.global.js","sourcesContent":["/**\r\n * PromptJS  utils.ts\r\n * Small internal utilities shared across modules.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n *\r\n * Includes:\r\n *   - uid(prefix): generate short unique ids for instances (e.g., 'pj-abc123')\r\n *   - createNanoEvents(): tiny event emitter (on/off/emit)\r\n *   - setAttributes(el, attrs): batch-assign attributes safely\r\n *\r\n * Keep this file dependency-free and stableother modules assume these helpers exist.\r\n */\r\n\r\nexport function uid(prefix='pj'){ return `${prefix}-${Math.random().toString(36).slice(2,8)}`; }\r\n\r\n// This is a minimal event emitter implementation, inspired by nanoevents (https://github.com/ai/nanoevents)\r\nexport function createNanoEvents(){\r\n  const map = new Map<string, Set<Function>>();\r\n  return {\r\n    on(t:string, fn:Function){ if(!map.has(t)) map.set(t,new Set()); map.get(t)!.add(fn); },\r\n    off(t:string, fn:Function){ map.get(t)?.delete(fn); },\r\n    emit(t:string, ...a:any[]){ map.get(t)?.forEach(fn=>fn(...a)); }\r\n  };\r\n}\r\n\r\nexport function setAttributes(el: HTMLElement, attrs: Record<string,string|number|boolean|undefined>){\r\n  for (const [k,v] of Object.entries(attrs)) if (v !== undefined) el.setAttribute(k, String(v));\r\n}\r\n","/**\r\n * PromptJS  config.ts\r\n * Central runtime configuration store and defaults.\r\n * Uses a simple event emitter to notify changes.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n *\r\n * Exposes:\r\n *   - config.get(): read the current configuration\r\n *   - config.update(partial): shallow-merge updates (with deep-merge for breakpoints/icons/toast)\r\n *   - config.onChange(fn): subscribe to changes (returns unsubscribe)\r\n *\r\n * Covers theme (light/dark/auto), container, z-index base, animation, i18n,\r\n * a11y hints, breakpoints, icon overrides, modal concurrency, and toast defaults.\r\n */\r\n\r\nimport { createNanoEvents } from \"./utils\";\r\nimport type {\r\n  Theme,\r\n  ModalConcurrency,\r\n  ToastPosition,\r\n  ToastBehavior,\r\n  ToastAnimations,\r\n} from \"./types\";\r\n\r\nexport interface PromptJSConfig {\r\n  theme: Theme;\r\n  container: HTMLElement | null;\r\n  zIndexBase: number;\r\n  animation: { enable: boolean; durationMs: number; easing?: string };  \r\n  i18n: {\r\n    locale: string;\r\n    dir: \"ltr\" | \"rtl\" | \"auto\";\r\n    ok: string;\r\n    cancel: string;\r\n    yes: string;\r\n    no: string;\r\n    close: string; // aria label for modal close button\r\n    dismiss: string; // aria label for toast dismiss\r\n    titles: {\r\n      info: string;\r\n      success: string;\r\n      warning: string;\r\n      error: string;\r\n      question: string;\r\n    };\r\n  };\r\n  a11y: { ariaModalLabel?: string };\r\n  breakpoints: { sm: number; md: number; lg: number };\r\n  icons: Partial<\r\n    Record<\r\n      \"info\" | \"success\" | \"warning\" | \"error\" | \"question\",\r\n      string | HTMLElement\r\n    >\r\n  >;\r\n  overlay: {\r\n    fade: boolean;\r\n    // surfaceRgb: string;\r\n    surfaceAlpha: number;\r\n    backdropBlurPx: number;\r\n  };\r\n  modal: {\r\n    concurrency: ModalConcurrency;\r\n    // surfaceRgb: string;\r\n    surfaceAlpha?: number;   // 0 to 1, default 1.0 (opaque)\r\n    dialogBlurPx?: number;   // backdrop-filter blur behind the modal (0 = none)\r\n  };\r\n  toast: {\r\n    defaultPosition: ToastPosition; // default 'top-center'\r\n    behavior: ToastBehavior; // 'stack' | 'queue' | 'replace'\r\n    maxVisible: number; // cap per position for stack/queue\r\n    spacingPx: number; // gap between toasts inside a slot\r\n    margins: { top: number; bottom: number; left: number; right: number };\r\n    zBoost: number; // z-index boost above overlays\r\n    animations: ToastAnimations; // enter/exit + timeoutCue defaults (direction may be 'auto')\r\n    defaultTimeoutMs: number; // e.g., 5000; 0 means sticky by default\r\n    defaultDismissible: boolean; // show close button by default\r\n  };\r\n}\r\n\r\nconst defaults: PromptJSConfig = {\r\n  theme: \"auto\",\r\n  container: null,\r\n  zIndexBase: 2000,\r\n  animation: { enable: true, durationMs: 180, easing: \"ease\" },  \r\n  i18n: {\r\n    locale: \"en\",\r\n    dir: \"auto\",\r\n    ok: \"OK\",\r\n    cancel: \"Cancel\",\r\n    yes: \"Yes\",\r\n    no: \"No\",\r\n    close: \"Close\",\r\n    dismiss: \"Dismiss\",\r\n    titles: {\r\n      info: \"Information\",\r\n      success: \"Success\",\r\n      warning: \"Warning\",\r\n      error: \"Error\",\r\n      question: \"Question\",\r\n    },\r\n  },\r\n  a11y: {},\r\n  breakpoints: { sm: 480, md: 640, lg: 800 },\r\n  icons: {},\r\n  overlay: {\r\n    fade: true,    \r\n    surfaceAlpha: 0.6,\r\n    backdropBlurPx: 0,   \r\n  },\r\n  modal: {\r\n    concurrency: \"queue\",\r\n    surfaceAlpha: 1.0,\r\n    dialogBlurPx: 0,\r\n  },\r\n  toast: {\r\n    defaultPosition: \"top-center\",\r\n    behavior: \"stack\",\r\n    maxVisible: 3,\r\n    spacingPx: 10,\r\n    margins: { top: 16, bottom: 16, left: 16, right: 16 },\r\n    zBoost: 100,\r\n    animations: {\r\n      // Final direction and distance are derived in toast.ts when direction === 'auto'\r\n      // based on the chosen position. These are sensible global defaults.\r\n      enter: { preset: \"slide\", direction: \"auto\" },\r\n      exit: { preset: \"slide\", direction: \"auto\" },\r\n      timeoutCue: { show: true, position: \"bottom\", direction: \"shrink\", thicknessPx: 3 },\r\n    },\r\n    defaultTimeoutMs: 4000,\r\n    defaultDismissible: true,\r\n  },\r\n};\r\n\r\nlet current: PromptJSConfig = { ...defaults };\r\nconst ee = createNanoEvents();\r\n\r\nexport const config = {\r\n  get: (): PromptJSConfig => current,\r\n\r\n  update(partial: Partial<PromptJSConfig>) {\r\n    current = {\r\n      ...current,\r\n      ...partial,\r\n      breakpoints: {\r\n        ...current.breakpoints,\r\n        ...(partial.breakpoints || {}),\r\n      },\r\n      icons: {\r\n        ...current.icons,\r\n        ...(partial.icons || {}),\r\n      },\r\n      animation: { ...current.animation, ...(partial.animation || {}) },\r\n      overlay: { ...current.overlay, ...(partial.overlay || {}) },      \r\n      i18n: {\r\n        ...current.i18n,\r\n        ...(partial.i18n || {}),\r\n        titles: {\r\n          ...current.i18n.titles,\r\n          ...(partial.i18n?.titles || {}),\r\n        },\r\n      },\r\n      toast: {\r\n        ...current.toast,\r\n        ...(partial.toast || {}),\r\n        margins: {\r\n          ...current.toast.margins,\r\n          ...(partial.toast?.margins || {}),\r\n        },\r\n        animations: {\r\n          ...current.toast.animations,\r\n          ...(partial.toast?.animations || {}),\r\n          enter: partial.toast?.animations?.enter\r\n            ? {\r\n                ...current.toast.animations.enter,\r\n                ...partial.toast.animations.enter,\r\n              }\r\n            : current.toast.animations.enter,\r\n          exit: partial.toast?.animations?.exit\r\n            ? {\r\n                ...current.toast.animations.exit,\r\n                ...partial.toast.animations.exit,\r\n              }\r\n            : current.toast.animations.exit,\r\n          timeoutCue: partial.toast?.animations?.timeoutCue\r\n            ? {\r\n                ...current.toast.animations.timeoutCue,\r\n                ...partial.toast.animations.timeoutCue,\r\n              }\r\n            : current.toast.animations.timeoutCue,\r\n        },\r\n      },\r\n    };\r\n\r\n    // Apply theme class to documentElement based on updated config\r\n    if (current.theme === \"auto\") {\r\n      document.documentElement.classList.add(\"pj-theme-auto\");\r\n      document.documentElement.classList.remove(\r\n        \"pj-theme-light\",\r\n        \"pj-theme-dark\"\r\n      );      \r\n    } else if (current.theme === \"light\") {\r\n      document.documentElement.classList.add(\"pj-theme-light\");\r\n      document.documentElement.classList.remove(\r\n        \"pj-theme-dark\",\r\n        \"pj-theme-auto\"\r\n      );\r\n    } else if (current.theme === \"dark\") {\r\n      document.documentElement.classList.add(\"pj-theme-dark\");\r\n      document.documentElement.classList.remove(\r\n        \"pj-theme-light\",\r\n        \"pj-theme-auto\"\r\n      );\r\n    }\r\n    // Change theme class for pj-portal and pj-toasts if they exist\r\n      const portal_grandcontainer = document.querySelector(\".pj-portal\");\r\n      const toasts_grandcontainer = document.querySelector(\".pj-toasts\");\r\n      if (portal_grandcontainer) {\r\n        portal_grandcontainer.classList.remove(\"pj-theme-light\", \"pj-theme-dark\", \"pj-theme-auto\");\r\n        portal_grandcontainer.classList.add(\"pj-theme-\" + (current.theme || \"auto\"));\r\n      }\r\n      if (toasts_grandcontainer) {\r\n        toasts_grandcontainer.classList.remove(\"pj-theme-light\", \"pj-theme-dark\", \"pj-theme-auto\");\r\n        toasts_grandcontainer.classList.add(\"pj-theme-\" + (current.theme || \"auto\"));\r\n      }\r\n\r\n    ee.emit(\"change\");\r\n  },\r\n\r\n  onChange(fn: () => void) {\r\n    ee.on(\"change\", fn);\r\n    return () => ee.off(\"change\", fn);\r\n  },\r\n};\r\n","// modal.ts\r\nimport { sanitize } from \"./sanitize\";\r\nimport { createSurface, type CoreOptions } from \"./modal-core\";\r\nimport type {\r\n  ModalOptions,\r\n  BareModalOptions,\r\n  ModalInstance,\r\n  ButtonDef,\r\n} from \"./types\";\r\nimport { config } from \"./config\";\r\n\r\n/* ---------------- Dialogs: Modal.open(...) ---------------- */\r\n\r\nexport function open(options: ModalOptions): ModalInstance {\r\n  const cfg = config.get();\r\n  const i18n = cfg.i18n;\r\n\r\n  const core: CoreOptions = {\r\n    // chrome\r\n    windowed: true,\r\n    bare: false,\r\n    size: options.size,\r\n    surfaceClass: (options as any).surfaceClass, // optional hooks if you added them\r\n    contentClass: (options as any).contentClass,\r\n\r\n    // visuals\r\n    surfaceAlpha: options.surfaceAlpha,\r\n    dialogBlurPx: options.dialogBlurPx,\r\n    backdropBlurPx: options.backdropBlurPx,\r\n    kind: options.kind,\r\n\r\n    // behavior\r\n    animate: options.animate,\r\n    closeOnEsc: options.closeOnEsc ?? true,\r\n    closeOnBackdrop: options.closeOnBackdrop ?? true,\r\n    trapFocus: options.trapFocus ?? true,\r\n    ariaLabel: options.ariaLabel,\r\n    draggable: options.draggable,\r\n    onOpen: options.onOpen,\r\n    onClose: options.onClose,\r\n    concurrency: options.concurrency,\r\n  };\r\n\r\n  // dialog renderers\r\n  return createSurface(core, {\r\n    renderHeader(inst, header) {\r\n      const hasTitle =\r\n        typeof options.title === \"string\" && options.title.length > 0;\r\n      const computedTitle = hasTitle\r\n        ? options.title\r\n        : options.kind\r\n        ? i18n.titles[options.kind]\r\n        : undefined;\r\n\r\n      if (computedTitle) {\r\n        header.innerHTML = `<h2 class=\"pj-modal-title\">${sanitize(\r\n          computedTitle\r\n        )}</h2>`;\r\n      }\r\n\r\n      if (options.showClose ?? true) {\r\n        const c = document.createElement(\"button\");\r\n        c.className = \"pj-modal-close\";\r\n        c.setAttribute(\"aria-label\", options.closeAriaLabel || i18n.close);\r\n        c.innerHTML =\r\n          '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" ' +\r\n          'fill=\"none\" stroke=\"currentColor\" stroke-width=\"4\" aria-hidden=\"true\">' +\r\n          '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18 18 6M6 6l12 12\"/></svg>';\r\n        c.addEventListener(\"click\", () => inst.close(\"close\"));\r\n        header.appendChild(c);\r\n      }\r\n    },\r\n\r\n    renderBody(_inst, body, setContentEl) {\r\n      if (typeof options.content === \"string\") {\r\n        body.innerHTML = options.unsafeHTML\r\n          ? options.content\r\n          : sanitize(options.content);\r\n        setContentEl(body);\r\n      } else {\r\n        body.appendChild(options.content);\r\n        setContentEl(options.content as HTMLElement);\r\n      }\r\n    },\r\n\r\n    renderFooter(inst, footer) {\r\n      const btns: ButtonDef[] = options.buttons ?? [\r\n        { id: \"ok\", text: i18n.ok, variant: \"primary\" },\r\n      ];\r\n      for (const btn of btns) {\r\n        const b = document.createElement(\"button\");\r\n        b.className = `pj-modal-btn ${btn.variant || \"neutral\"}`;\r\n        b.textContent = btn.text;\r\n        b.addEventListener(\"click\", async () => {\r\n          try {\r\n            b.disabled = true;\r\n            if (btn.onClick) await btn.onClick(inst);\r\n          } finally {\r\n            b.disabled = false;\r\n            if (btn.closeOnClick ?? true) inst.close(btn.id);\r\n          }\r\n        });\r\n        footer.appendChild(b);\r\n      }\r\n\r\n      // Provide a real update() only for dialog fields\r\n      (inst as any).update = (\r\n        partial: Partial<\r\n          Pick<ModalOptions, \"title\" | \"content\" | \"unsafeHTML\" | \"buttons\">\r\n        >\r\n      ) => {\r\n        if (partial.title !== undefined) {\r\n          const h = inst.el.querySelector(\r\n            \".pj-modal-title\"\r\n          ) as HTMLElement | null;\r\n          if (h) h.textContent = partial.title ?? \"\";\r\n        }\r\n        if (partial.content !== undefined) {\r\n          const bodyEl = inst.el.querySelector(\r\n            \".pj-modal-content\"\r\n          ) as HTMLElement;\r\n          if (!bodyEl) return;\r\n          bodyEl.innerHTML = \"\";\r\n          if (typeof partial.content === \"string\") {\r\n            bodyEl.innerHTML = partial.unsafeHTML\r\n              ? partial.content\r\n              : sanitize(partial.content);\r\n          } else {\r\n            bodyEl.appendChild(partial.content);\r\n          }\r\n          (inst as any)._contentEl = bodyEl; // defensive, though getter is set in core\r\n          // keep the exposed getter consistent\r\n          Object.getOwnPropertyDescriptor(inst, \"contentEl\")?.get &&\r\n            ((_) => _)(bodyEl);\r\n        }\r\n        if (partial.buttons) {\r\n          footer.innerHTML = \"\";\r\n          partial.buttons.forEach((bd) => {\r\n            const bb = document.createElement(\"button\");\r\n            bb.className = `pj-modal-btn ${bd.variant || \"neutral\"}`;\r\n            bb.textContent = bd.text;\r\n            bb.addEventListener(\"click\", async () => {\r\n              try {\r\n                bb.disabled = true;\r\n                if (bd.onClick) await bd.onClick(inst);\r\n              } finally {\r\n                bb.disabled = false;\r\n                if (bd.closeOnClick ?? true) inst.close(bd.id);\r\n              }\r\n            });\r\n            footer.appendChild(bb);\r\n          });\r\n        }\r\n      };\r\n    },\r\n\r\n    setUpdater: (inst, { header, body, footer, setContentEl }) => {\r\n      (inst as any).update = (\r\n        partial: Partial<\r\n          Pick<ModalOptions, \"title\" | \"content\" | \"unsafeHTML\" | \"buttons\">\r\n        >\r\n      ) => {\r\n        // title\r\n        if (partial.title !== undefined && header) {\r\n          const h = header.querySelector(\r\n            \".pj-modal-title\"\r\n          ) as HTMLElement | null;\r\n          if (h) h.textContent = partial.title ?? \"\";\r\n        }\r\n\r\n        // content\r\n        if (partial.content !== undefined) {\r\n          body.innerHTML = \"\";\r\n          if (typeof partial.content === \"string\") {\r\n            body.innerHTML = partial.unsafeHTML\r\n              ? partial.content\r\n              : sanitize(partial.content);\r\n          } else {\r\n            body.appendChild(partial.content);\r\n          }\r\n          setContentEl(body); // keeps inst.contentEl correct without touching privates\r\n        }\r\n\r\n        // buttons (only if footer exists)\r\n        if (partial.buttons && footer) {\r\n          footer.innerHTML = \"\";\r\n          partial.buttons.forEach((bd) => {\r\n            const bb = document.createElement(\"button\");\r\n            bb.className = `pj-modal-btn ${bd.variant || \"neutral\"}`;\r\n            bb.textContent = bd.text;\r\n            bb.addEventListener(\"click\", async () => {\r\n              try {\r\n                bb.disabled = true;\r\n                if (bd.onClick) await bd.onClick(inst);\r\n              } finally {\r\n                bb.disabled = false;\r\n                if (bd.closeOnClick ?? true) inst.close(bd.id);\r\n              }\r\n            });\r\n            footer.appendChild(bb);\r\n          });\r\n        }\r\n      };\r\n    },\r\n  });\r\n}\r\n\r\nexport function bare(options: BareModalOptions = {}): ModalInstance {\r\n  const windowed = options.windowed !== false;\r\n\r\n  const core: CoreOptions = {\r\n    // chrome\r\n    windowed,\r\n    bare: true,\r\n    size: options.size,\r\n    surfaceClass: options.surfaceClass,\r\n    contentClass: options.contentClass,\r\n\r\n    // visuals\r\n    surfaceAlpha: options.surfaceAlpha,\r\n    dialogBlurPx: options.dialogBlurPx,\r\n    backdropBlurPx: options.backdropBlurPx,\r\n    kind: options.kind,\r\n\r\n    // behavior\r\n    animate: options.animate,\r\n    closeOnEsc: options.closeOnEsc ?? true,\r\n    closeOnBackdrop: options.closeOnBackdrop ?? true,\r\n    trapFocus: options.trapFocus ?? true,\r\n    ariaLabel: options.ariaLabel,\r\n    draggable: (() => {\r\n      if (!windowed && options.draggable) {\r\n        const spec =\r\n          typeof options.draggable === \"object\" ? options.draggable : {};\r\n        return {\r\n          handle: spec.handle ?? undefined,\r\n          axis: spec.axis,\r\n          withinViewport: spec.withinViewport,\r\n          disableOnMobile: spec.disableOnMobile,\r\n          cursor: spec.cursor,\r\n        };\r\n      }\r\n      return options.draggable;\r\n    })(),\r\n    onOpen: options.onOpen,\r\n    onClose: options.onClose,\r\n    concurrency: options.concurrency,\r\n  };\r\n\r\n  return createSurface(core, {\r\n    // no header/footer by default\r\n    renderBody(_inst, body, setContentEl) {\r\n      if (typeof options.content === \"string\") {\r\n        body.innerHTML = options.unsafeHTML\r\n          ? options.content\r\n          : sanitize(options.content);\r\n        setContentEl(body);\r\n      } else if (options.content) {\r\n        body.appendChild(options.content);\r\n        setContentEl(options.content as HTMLElement);\r\n      }\r\n    },\r\n  });\r\n}\r\n","/**\r\n * PromptJS - sanitize.ts\r\n * Minimal, dependency-free HTML sanitizer for string content.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n *\r\n * - Strips dangerous tags (script, style, iframe, object, embed, form, etc.)\r\n * - Removes inline event handlers (on*)\r\n * - Removes inline styles\r\n * - Restricts attributes to an allow-list (with aria-* and data-* passthrough)\r\n * - Scrubs URLs on <a href> to allowed protocols (http, https, mailto, tel) or relative\r\n * - Unwraps disallowed elements but preserves their text content\r\n *\r\n * NOTE:\r\n * - If you need full control (e.g., custom HTML widgets), pass a DOM Node instead\r\n *   of an HTML string to the API OR set `unsafeHTML: true` (not recommended).\r\n */\r\n\r\nexport interface SanitizeOptions {\r\n  allowedTags: Set<string>;\r\n  allowedGlobalAttrs: Set<string>;\r\n  allowedPerTagAttrs: Record<string, Set<string>>;\r\n  allowDataAttrs: boolean; // data-*\r\n  allowAriaAttrs: boolean; // aria-*\r\n  allowClassAttr: boolean; // class\r\n  allowIdAttr: boolean;    // id\r\n  // Whether to unwrap a disallowed element (keep its children) or drop entirely\r\n  unwrapDisallowed: boolean;\r\n}\r\n\r\nconst DEFAULT_OPTIONS: SanitizeOptions = {\r\n  // Conservative but practical allow-list for modal/notification body content\r\n  allowedTags: new Set([\r\n    // Text & inline\r\n    'b', 'strong', 'i', 'em', 'u', 's', 'span', 'small', 'mark', 'code', 'kbd', 'samp', 'sup', 'sub', 'br',\r\n    // Block\r\n    'p', 'div', 'blockquote', 'pre', 'hr',\r\n    // Lists\r\n    'ul', 'ol', 'li',\r\n    // Headings\r\n    'h1','h2','h3','h4','h5','h6',\r\n    // Links\r\n    'a',\r\n  ]),\r\n  // Global attributes we consider safe\r\n  allowedGlobalAttrs: new Set([\r\n    'title', 'dir', 'lang', 'role',\r\n  ]),\r\n  // Per-tag attributes\r\n  allowedPerTagAttrs: {\r\n    a: new Set(['href', 'target', 'rel', 'name']),\r\n    // Add more tag-specific attrs here if you later allow them (e.g., 'pre' could allow 'tabindex')\r\n  },\r\n  allowDataAttrs: true,\r\n  allowAriaAttrs: true,\r\n  allowClassAttr: true,\r\n  allowIdAttr: false, // generally unnecessary in modal content; can cause collisions\r\n  unwrapDisallowed: true,\r\n};\r\n\r\n// Tags we always drop (never unwrap to avoid weirdness)  feel free to extend\r\nconst DANGEROUS_TAGS = new Set([\r\n  'script', 'style', 'iframe', 'object', 'embed', 'link', 'meta', 'base',\r\n  'form', 'input', 'button', 'textarea', 'select', 'option',\r\n  'svg', 'math', // SVG/MathML can be abused; keep disabled by default\r\n]);\r\n\r\nconst EVENT_ATTR = /^on/i;\r\nconst ARIA_ATTR = /^aria-/i;\r\nconst DATA_ATTR = /^data-/i;\r\n\r\nfunction isAllowedUrl(url: string): boolean {\r\n  // Allow relative URLs, hash links, and ?query links quickly\r\n  const t = url.trim();\r\n  if (!t) return true;\r\n  if (t.startsWith('#') || t.startsWith('?') || t.startsWith('/')) return true;\r\n  if (t.startsWith('./') || t.startsWith('../')) return true;\r\n\r\n  try {\r\n    const u = new URL(t, document.baseURI);\r\n    const proto = u.protocol.toLowerCase();\r\n    return proto === 'http:' || proto === 'https:' || proto === 'mailto:' || proto === 'tel:';\r\n  } catch {\r\n    // If URL parsing fails, treat as unsafe\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction sanitizeAttributes(el: Element, opts: SanitizeOptions) {\r\n  // Copy attribute list firstlive NamedNodeMap changes while iterating\r\n  const toRemove: string[] = [];\r\n  const toSet: Array<{ name: string; value: string }> = [];\r\n\r\n  for (let i = 0; i < el.attributes.length; i++) {\r\n    const attr = el.attributes[i];\r\n    const name = attr.name;\r\n    const value = attr.value;\r\n\r\n    // Strip inline event handlers and inline styles immediately\r\n    if (EVENT_ATTR.test(name) || name === 'style') { toRemove.push(name); continue; }\r\n\r\n    // Allow class/id based on options\r\n    if (name === 'class') { if (!opts.allowClassAttr) { toRemove.push(name); } continue; }\r\n    if (name === 'id')    { if (!opts.allowIdAttr)    { toRemove.push(name); } continue; }\r\n\r\n    // data-* and aria-* passthrough\r\n    if (opts.allowDataAttrs && DATA_ATTR.test(name)) continue;\r\n    if (opts.allowAriaAttrs && ARIA_ATTR.test(name)) continue;\r\n\r\n    // Is this a globally allowed attribute?\r\n    if (opts.allowedGlobalAttrs.has(name)) continue;\r\n\r\n    // Is this attribute allowed for this specific tag?\r\n    const tag = el.tagName.toLowerCase();\r\n    const perTag = opts.allowedPerTagAttrs[tag];\r\n    if (perTag && perTag.has(name)) {\r\n      // Special handling for <a href>\r\n      if (tag === 'a' && name === 'href') {\r\n        if (!isAllowedUrl(value)) {\r\n          toRemove.push(name);\r\n          continue;\r\n        }\r\n        // If target=_blank, enforce rel safety\r\n        const target = el.getAttribute('target');\r\n        if (target === '_blank') {\r\n          const existingRel = el.getAttribute('rel') || '';\r\n          const needed = new Set(['noopener', 'noreferrer']);\r\n          existingRel.split(/\\s+/).forEach((r) => r && needed.delete(r.toLowerCase()));\r\n          if (needed.size) {\r\n            toSet.push({ name: 'rel', value: (existingRel ? existingRel + ' ' : '') + Array.from(needed).join(' ') });\r\n          }\r\n        }\r\n      }\r\n      continue;\r\n    }\r\n\r\n    // Otherwise, drop it\r\n    toRemove.push(name);\r\n  }\r\n\r\n  toRemove.forEach((n) => el.removeAttribute(n));\r\n  toSet.forEach(({ name, value }) => el.setAttribute(name, value));\r\n}\r\n\r\nfunction unwrapElement(el: Element) {\r\n  const parent = el.parentNode;\r\n  if (!parent) { el.remove(); return; }\r\n  while (el.firstChild) parent.insertBefore(el.firstChild, el);\r\n  parent.removeChild(el);\r\n}\r\n\r\nfunction cleanNode(node: Node, opts: SanitizeOptions) {\r\n  // Remove comments\r\n  if (node.nodeType === Node.COMMENT_NODE) {\r\n    node.parentNode?.removeChild(node);\r\n    return;\r\n  }\r\n\r\n  if (node.nodeType !== Node.ELEMENT_NODE) return;\r\n\r\n  const el = node as Element;\r\n  const tag = el.tagName.toLowerCase();\r\n\r\n  // Hard drop dangerous tags and their contents\r\n  if (DANGEROUS_TAGS.has(tag)) {\r\n    el.parentNode?.removeChild(el);\r\n    return;\r\n  }\r\n\r\n  // If not allowed, either unwrap or drop\r\n  if (!opts.allowedTags.has(tag)) {\r\n    if (opts.unwrapDisallowed) unwrapElement(el);\r\n    else el.parentNode?.removeChild(el);\r\n    return;\r\n  }\r\n\r\n  // Allowed element  sanitize its attributes\r\n  sanitizeAttributes(el, opts);\r\n\r\n  // Recurse into children (convert NodeList to array first)\r\n  const children = Array.from(el.childNodes);\r\n  for (const child of children) cleanNode(child, opts);\r\n}\r\n\r\n/**\r\n * Sanitize an HTML string and return a safe HTML string.\r\n * If you need a DocumentFragment, you can create one from the returned string.\r\n */\r\nexport function sanitize(html: string, options?: Partial<SanitizeOptions>): string {\r\n  if (!html) return '';\r\n\r\n  const opts: SanitizeOptions = {\r\n    ...DEFAULT_OPTIONS,\r\n    ...(options || {}),\r\n    // Deep-merge perTagAttrs/sets if caller provided them\r\n    allowedTags: options?.allowedTags ? new Set(options.allowedTags) : DEFAULT_OPTIONS.allowedTags,\r\n    allowedGlobalAttrs: options?.allowedGlobalAttrs ? new Set(options.allowedGlobalAttrs) : DEFAULT_OPTIONS.allowedGlobalAttrs,\r\n    allowedPerTagAttrs: options?.allowedPerTagAttrs\r\n      ? Object.fromEntries(Object.entries(options.allowedPerTagAttrs).map(([k, v]) => [k, new Set(v)]))\r\n      : DEFAULT_OPTIONS.allowedPerTagAttrs,\r\n  };\r\n\r\n  // Use <template> to avoid immediate reflow and keep markup isolated\r\n  const tpl = document.createElement('template');\r\n  tpl.innerHTML = html;\r\n\r\n  const nodes = Array.from(tpl.content.childNodes);\r\n  for (const n of nodes) cleanNode(n, opts);\r\n\r\n  // Return sanitized HTML string\r\n  const out = document.createElement('div');\r\n  out.appendChild(tpl.content.cloneNode(true));\r\n  return out.innerHTML;\r\n}\r\n","/**\r\n * PromptJS  manager.ts\r\n * Singleton DOM manager that coordinates shared UI infrastructure.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n *\r\n * Responsibilities:\r\n *   - Create and maintain root containers:\r\n *       .pj-portal   (modals/dialog overlays)\r\n *       .pj-toasts   (overlaying toast layer with per-position slots)\r\n *   - Enforce modal concurrency (queue or reject new opens)\r\n *   - Body scroll lock + scrollbar compensation\r\n *   - Z-index base coordination (toasts sit above overlays)\r\n *   - Toast slots and per-position behavior/queues\r\n *\r\n * No external deps. Works with ES2019 + DOM libs.\r\n */\r\n\r\nimport { config } from './config';\r\nimport type { ToastBehavior, ToastPosition } from './types';\r\n\r\ntype Job = () => void;\r\n\r\nclass Manager {\r\n  portal!: HTMLElement;     // overlay mount (modals/dialogs)\r\n  toastsRoot!: HTMLElement; // root layer for toast slots\r\n\r\n  // Modal state\r\n  private activeModal = 0;\r\n  private modalQueue: Job[] = [];\r\n\r\n  // Toast state\r\n  private toastSlots = new Map<ToastPosition, HTMLElement>();\r\n  private toastQueues = new Map<ToastPosition, Array<{ mount: () => void; maxVisible: number }>>();\r\n\r\n  ensureRoots() {\r\n    const parent = config.get().container ?? document.body;\r\n\r\n    const existing = document.querySelector('.pj-portal') as HTMLElement;\r\n    if (existing && this.portal && existing !== this.portal) {\r\n      existing.remove();\r\n      this.portal = undefined!;\r\n    }   \r\n\r\n    if (!this.portal) {\r\n      this.portal = document.createElement('div');\r\n      this.portal.className = 'pj-portal pj-theme-' + (config.get().theme || 'auto');\r\n      this.portal.style.position = 'relative';\r\n      this.portal.style.zIndex = String(config.get().zIndexBase || 2000);\r\n      parent.appendChild(this.portal);\r\n    }\r\n    else {\r\n      this.portal.style.zIndex = String(config.get().zIndexBase || 2000);\r\n    }     \r\n\r\n    if (!this.toastsRoot) {\r\n      this.toastsRoot = document.createElement('div');\r\n      this.toastsRoot.className = 'pj-toasts pj-theme-' + (config.get().theme || 'auto');\r\n      // Above overlays: base + zBoost\r\n      const z = (config.get().zIndexBase || 2000) + (config.get().toast.zBoost || 100);\r\n      Object.assign(this.toastsRoot.style, {\r\n        position: 'fixed',\r\n        inset: '0',\r\n        zIndex: String(z),\r\n        pointerEvents: 'none',\r\n      } as CSSStyleDeclaration);\r\n      parent.appendChild(this.toastsRoot);\r\n    }\r\n  }\r\n\r\n  // -------- Modal orchestration --------\r\n\r\n  open(job: Job) {\r\n    this.ensureRoots();\r\n    const mode = config.get().modal.concurrency;\r\n    if (this.activeModal > 0 && mode === 'reject') {\r\n      throw new Error('PromptJS: modal already open');\r\n    }\r\n    if (this.activeModal > 0 && mode === 'queue') {\r\n      this.modalQueue.push(job);\r\n      return;\r\n    }\r\n    this.activeModal++;\r\n    job();\r\n  }\r\n\r\n  onClose() {\r\n    this.activeModal = Math.max(0, this.activeModal - 1);\r\n    if (this.modalQueue.length) {\r\n      const next = this.modalQueue.shift()!;\r\n      this.open(next);\r\n    }\r\n  }\r\n\r\n  scrollLock(lock: boolean) {\r\n    const body = document.body;\r\n    if (lock) {\r\n      if (!body.style.getPropertyValue('--pj-scrollbar')) {\r\n        const sbw = window.innerWidth - document.documentElement.clientWidth;\r\n        body.style.setProperty('--pj-scrollbar', `${sbw}px`);\r\n      }\r\n      body.classList.add('pj-lock');\r\n    } else {\r\n      body.classList.remove('pj-lock');\r\n      body.style.removeProperty('--pj-scrollbar');\r\n    }\r\n  }\r\n\r\n  // -------- Toast infrastructure --------\r\n\r\n  private getToastSlot(pos: ToastPosition): HTMLElement {\r\n    this.ensureRoots();\r\n    const existing = this.toastSlots.get(pos);\r\n    if (existing) return existing;\r\n\r\n    const slot = document.createElement('div');\r\n    slot.className = `pj-toast-slot pj-${pos}`;\r\n    slot.style.position = 'fixed';\r\n    slot.style.display = 'flex';\r\n    slot.style.flexDirection = 'column';\r\n    slot.style.pointerEvents = 'none';\r\n\r\n    const { margins, spacingPx } = config.get().toast;\r\n    slot.style.gap = `${spacingPx}px`;\r\n\r\n    const top = `${margins.top}px`;\r\n    const bottom = `${margins.bottom}px`;\r\n    const left = `${margins.left}px`;\r\n    const right = `${margins.right}px`;\r\n\r\n    // Anchor by position\r\n    switch (pos) {\r\n      case 'top-left':\r\n        slot.style.top = top; slot.style.left = left; break;\r\n      case 'top-center':\r\n        slot.style.top = top; slot.style.left = '50%'; slot.style.transform = 'translateX(-50%)'; break;\r\n      case 'top-right':\r\n        slot.style.top = top; slot.style.right = right; break;\r\n      case 'bottom-left':\r\n        slot.style.bottom = bottom; slot.style.left = left; break;\r\n      case 'bottom-center':\r\n        slot.style.bottom = bottom; slot.style.left = '50%'; slot.style.transform = 'translateX(-50%)'; break;\r\n      case 'bottom-right':\r\n        slot.style.bottom = bottom; slot.style.right = right; break;\r\n    }\r\n\r\n    this.toastsRoot.appendChild(slot);\r\n    this.toastSlots.set(pos, slot);\r\n    return slot;\r\n  }\r\n\r\n  /**\r\n   * Mount a toast into its position slot honoring behavior.\r\n   * - stack: append; if full, drop oldest to keep UI responsive\r\n   * - queue: enqueue if full; mount when a slot frees\r\n   * - replace: clear slot and show only the new toast\r\n   */\r\n  showToast(el: HTMLElement, pos: ToastPosition, behavior: ToastBehavior, maxVisible: number) {\r\n    const slot = this.getToastSlot(pos);\r\n    const visible = slot.children.length;\r\n\r\n    // Allow interactions inside toast\r\n    el.style.pointerEvents = 'auto';\r\n\r\n    if (behavior === 'replace') {\r\n      while (slot.firstElementChild) slot.removeChild(slot.firstElementChild);\r\n      slot.appendChild(el);\r\n      return;\r\n    }\r\n\r\n    if (behavior === 'stack') {\r\n      if (visible >= maxVisible) {\r\n        slot.firstElementChild?.remove();\r\n      }\r\n      slot.appendChild(el);\r\n      return;\r\n    }\r\n\r\n    // queue\r\n    if (visible >= maxVisible) {\r\n      const q = this.toastQueues.get(pos) || [];\r\n      q.push({ mount: () => slot.appendChild(el), maxVisible });\r\n      this.toastQueues.set(pos, q);\r\n    } else {\r\n      slot.appendChild(el);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Notify manager that a toast at a position was removed.\r\n   * Used to advance queued toasts for that position.\r\n   */\r\n  onToastRemoved(pos: ToastPosition) {\r\n    const slot = this.getToastSlot(pos);\r\n    const q = this.toastQueues.get(pos);\r\n    if (!q || q.length === 0) return;\r\n\r\n    if (slot.children.length < q[0].maxVisible) {\r\n      const next = q.shift()!;\r\n      next.mount();\r\n    }\r\n  }\r\n}\r\n\r\nexport const manager = new Manager();\r\n","/**\r\n * PromptJS  a11y.ts\r\n * Accessibility utilities shared by modal/notify.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n *\r\n * Features:\r\n *  - getTabbables(root): robust tabbable element query\r\n *  - focusFirst(root, fallback?): focus management helper\r\n *  - trapFocus(container, opts?): keep Tab/Shift+Tab within container; returns { release() }\r\n *  - ariaHideSiblings(target): hide everything except target; returns restore()\r\n *  - createLiveRegion(kind): get/create polite/assertive live region for toasts\r\n *\r\n * No external deps. No async/await. Works with ES2019 + DOM libs.\r\n */\r\n\r\nexport type LiveKind = 'polite' | 'assertive';\r\n\r\nexport interface TrapOptions {\r\n  initialFocus?: HTMLElement | null;   // element to focus on activate\r\n  restoreFocus?: HTMLElement | null;   // element to restore on release (default: previously focused)\r\n}\r\n\r\n/** Return all tabbable descendants within root (in DOM order). */\r\nexport function getTabbables(root: ParentNode): HTMLElement[] {\r\n  const selector = [\r\n    'a[href]',\r\n    'area[href]',\r\n    'button:not([disabled])',\r\n    'input:not([disabled]):not([type=\"hidden\"])',\r\n    'select:not([disabled])',\r\n    'textarea:not([disabled])',\r\n    'summary', // details/summary is focusable\r\n    '[tabindex]',\r\n    '[contenteditable=\"true\"]',\r\n  ].join(',');\r\n\r\n  const nodes = Array.from(root.querySelectorAll<HTMLElement>(selector));\r\n  return nodes.filter(isTabbable);\r\n}\r\n\r\nfunction isTabbable(el: HTMLElement): boolean {\r\n  if (!isFocusable(el)) return false;\r\n  const tabindex = getTabIndex(el);\r\n  return tabindex >= 0;\r\n}\r\n\r\nfunction isFocusable(el: HTMLElement): boolean {\r\n  if (!isVisible(el)) return false;\r\n  // Disabled form controls already filtered by selector, but keep guard:\r\n  // @ts-ignore  HTML*Element may not have disabled\r\n  if ((el as any).disabled) return false;\r\n  return true;\r\n}\r\n\r\nfunction isVisible(el: HTMLElement): boolean {\r\n  // Quick visibility heuristic\r\n  const style = window.getComputedStyle(el);\r\n  if (style.visibility === 'hidden' || style.display === 'none') return false;\r\n\r\n  // Hidden via details element\r\n  const details = el.closest('details');\r\n  if (details && !details.open && !details.querySelector('summary')?.contains(el)) return false;\r\n\r\n  // Not in document or clipped out\r\n  if (!el.ownerDocument || !el.getClientRects().length) {\r\n    // Fallback: if it's the root of the trap, allow focusing via tabindex -1 later\r\n    return !!el.ownerDocument;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction getTabIndex(el: HTMLElement): number {\r\n  const attr = el.getAttribute('tabindex');\r\n  if (attr !== null) {\r\n    const n = Number(attr);\r\n    return Number.isNaN(n) ? 0 : n;\r\n  }\r\n  // Certain elements are naturally tabbable\r\n  const tag = el.tagName.toLowerCase();\r\n  const naturallyTabbable = /^(a|area|input|select|textarea|button|summary)$/i.test(tag);\r\n  if (naturallyTabbable) {\r\n    // anchors without href are not tabbable\r\n    if ((tag === 'a' || tag === 'area') && !el.hasAttribute('href')) return -1;\r\n    return 0;\r\n  }\r\n  return -1;\r\n}\r\n\r\n/** Focus the first tabbable in root, or fallback element, or root (with temp tabindex). */\r\nexport function focusFirst(root: HTMLElement, fallback?: HTMLElement | null): void {\r\n  const tabbables = getTabbables(root);\r\n  const target = tabbables[0] || fallback || root;\r\n\r\n  // Ensure focusability if root is used\r\n  let removeTabIndex = false;\r\n  if (target === root && getTabIndex(root) < 0) {\r\n    root.setAttribute('tabindex', '-1');\r\n    removeTabIndex = true;\r\n  }\r\n\r\n  try {\r\n    target.focus({ preventScroll: true } as any);\r\n  } catch {\r\n    // ignore\r\n  } finally {\r\n    if (removeTabIndex) root.removeAttribute('tabindex');\r\n  }\r\n}\r\n\r\n/** Trap keyboard Tab/Shift+Tab inside the container. Returns { release() }. */\r\nexport function trapFocus(container: HTMLElement, opts?: TrapOptions): { release: () => void } {\r\n  const previouslyFocused = (document.activeElement as HTMLElement) || null;\r\n\r\n  // Initial focus\r\n  if (opts?.initialFocus) {\r\n    try { opts.initialFocus.focus({ preventScroll: true } as any); } catch {}\r\n  } else {\r\n    focusFirst(container, container);\r\n  }\r\n\r\n  const onKeyDown = (e: KeyboardEvent) => {\r\n    if (e.key !== 'Tab') return;\r\n    const tabbables = getTabbables(container);\r\n    if (tabbables.length === 0) {\r\n      // Keep focus on container\r\n      e.preventDefault();\r\n      focusFirst(container, container);\r\n      return;\r\n    }\r\n    const first = tabbables[0];\r\n    const last = tabbables[tabbables.length - 1];\r\n    const active = document.activeElement as HTMLElement | null;\r\n\r\n    if (e.shiftKey) {\r\n      if (!active || active === first || !container.contains(active)) {\r\n        e.preventDefault();\r\n        last.focus();\r\n      }\r\n    } else {\r\n      if (!active || active === last || !container.contains(active)) {\r\n        e.preventDefault();\r\n        first.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  document.addEventListener('keydown', onKeyDown, true);\r\n\r\n  const release = () => {\r\n    document.removeEventListener('keydown', onKeyDown, true);\r\n    const restore = opts?.restoreFocus === undefined ? previouslyFocused : opts.restoreFocus;\r\n    if (restore && document.contains(restore)) {\r\n      try { restore.focus({ preventScroll: true } as any); } catch {}\r\n    }\r\n  };\r\n\r\n  return { release };\r\n}\r\n\r\n/**\r\n * Hide everything except the target from assistive tech by toggling aria-hidden.\r\n * Returns a restore() function that reverts previous values.\r\n */\r\nexport function ariaHideSiblings(target: HTMLElement): () => void {\r\n  const doc = target.ownerDocument || document;\r\n  const root = doc.body;\r\n  const stack: Array<{ el: Element; prev: string | null }> = [];\r\n\r\n  // Walk direct children of <body>\r\n  Array.from(root.children).forEach((el) => {\r\n    if (el === target || el.contains(target)) return; // keep target branch visible\r\n    const prev = el.getAttribute('aria-hidden');\r\n    stack.push({ el, prev });\r\n    el.setAttribute('aria-hidden', 'true');\r\n\r\n    // If supported, also mark inert to block focus/pointer\r\n    // try { (el as any).inert = true; } catch { /* inert may not exist */ }\r\n  });\r\n\r\n  return () => {\r\n    for (const { el, prev } of stack) {\r\n      if (prev === null) el.removeAttribute('aria-hidden'); else el.setAttribute('aria-hidden', prev);\r\n      // try { delete (el as any).inert; } catch { /* ignore */ }\r\n    }\r\n  };\r\n}\r\n\r\n/** Create (or return) a shared live region for toasts. */\r\nexport function createLiveRegion(kind: LiveKind = 'polite'): HTMLElement {\r\n  const id = kind === 'assertive' ? 'pj-live-assertive' : 'pj-live-polite';\r\n  const existing = document.getElementById(id) as HTMLElement | null;\r\n  if (existing) return existing;\r\n\r\n  const region = document.createElement('div');\r\n  region.id = id;\r\n  region.setAttribute('aria-live', kind);\r\n  region.setAttribute('role', kind === 'assertive' ? 'alert' : 'status');\r\n  region.setAttribute('aria-atomic', 'true');\r\n  region.style.position = 'absolute';\r\n  region.style.width = '1px';\r\n  region.style.height = '1px';\r\n  region.style.margin = '-1px';\r\n  region.style.border = '0';\r\n  region.style.padding = '0';\r\n  region.style.clip = 'rect(0 0 0 0)';\r\n  region.style.overflow = 'hidden';\r\n\r\n  document.body.appendChild(region);\r\n  return region;\r\n}\r\n","// modal-core.ts\r\nimport { uid } from \"./utils\";\r\nimport { config } from \"./config\";\r\nimport { manager } from \"./manager\";\r\nimport { trapFocus, ariaHideSiblings } from \"./a11y\";\r\nimport type {\r\n  ModalInstance,\r\n  ModalDraggable,\r\n  ModalConcurrency,\r\n  NotifyKind,\r\n  ButtonDef,\r\n} from \"./types\";\r\n\r\n/**\r\n * Use longhand translate when available so dragging composes with animations.\r\n * Optionally add this CSS once if you want a robust fallback:\r\n * .pj-modal{ --pj-dx:0px; --pj-dy:0px; transform: translate(var(--pj-dx),var(--pj-dy)); }\r\n */\r\nfunction setDragOffset(el: HTMLElement, x: number, y: number) {\r\n  if (\"translate\" in (el.style as any))\r\n    (el.style as any).translate = `${x}px ${y}px`;\r\n  else {\r\n    el.style.setProperty(\"--pj-dx\", `${x}px`);\r\n    el.style.setProperty(\"--pj-dy\", `${y}px`);\r\n  }\r\n}\r\n\r\ntype DragResolved = {\r\n  axis: \"x\" | \"y\" | \"both\";\r\n  withinViewport: boolean;\r\n  cursor: string | null; // null => don't set\r\n};\r\n\r\nfunction enableDragging(\r\n  surfaceEl: HTMLDivElement,\r\n  handleEl: HTMLElement,\r\n  spec: DragResolved\r\n) {\r\n  let startX = 0,\r\n    startY = 0,\r\n    baseX = 0,\r\n    baseY = 0;\r\n  let moving = false;\r\n\r\n  const point = (e: MouseEvent | TouchEvent) => {\r\n    const t = (e as TouchEvent).touches?.[0] ?? (e as MouseEvent);\r\n    return { x: t.clientX, y: t.clientY };\r\n  };\r\n\r\n  const readTranslate = () => {\r\n    const t = surfaceEl.style.translate || \"\";\r\n    const m = t.match(/(-?\\d+(?:\\.\\d+)?)px\\s+(-?\\d+(?:\\.\\d+)?)px/);\r\n    if (m) return { x: parseFloat(m[1]), y: parseFloat(m[2]) };\r\n    const dx =\r\n      parseFloat(getComputedStyle(surfaceEl).getPropertyValue(\"--pj-dx\")) || 0;\r\n    const dy =\r\n      parseFloat(getComputedStyle(surfaceEl).getPropertyValue(\"--pj-dy\")) || 0;\r\n    return { x: dx, y: dy };\r\n  };\r\n\r\n  const clampViewport = (nx: number, ny: number) => {\r\n    if (!spec.withinViewport) return { x: nx, y: ny };\r\n    const vw = document.documentElement.clientWidth;\r\n    const vh = document.documentElement.clientHeight;\r\n    const r = surfaceEl.getBoundingClientRect();\r\n    const minX = -r.left + r.width * -0.9;\r\n    const maxX = vw - r.right + r.width * 0.9;\r\n    const minY = -r.top + r.height * -0.9;\r\n    const maxY = vh - r.bottom + r.height * 0.9;\r\n    return {\r\n      x: Math.min(Math.max(nx, minX), maxX),\r\n      y: Math.min(Math.max(ny, minY), maxY),\r\n    };\r\n  };\r\n\r\n  const onMove = (e: MouseEvent | TouchEvent) => {\r\n    if (!moving) return;\r\n    e.preventDefault();\r\n    const p = point(e);\r\n    let nx = baseX + (spec.axis === \"y\" ? 0 : p.x - startX);\r\n    let ny = baseY + (spec.axis === \"x\" ? 0 : p.y - startY);\r\n    ({ x: nx, y: ny } = clampViewport(nx, ny));\r\n    setDragOffset(surfaceEl, nx, ny);\r\n  };\r\n\r\n  const onUp = () => {\r\n    moving = false;\r\n    document.removeEventListener(\"mousemove\", onMove, true);\r\n    document.removeEventListener(\"touchmove\", onMove, true);\r\n    handleEl.style.cursor = spec.cursor || \"grab\";\r\n  };\r\n\r\n  const onDown = (e: MouseEvent | TouchEvent) => {\r\n    if (e instanceof MouseEvent && e.button !== 0) return;\r\n    e.preventDefault();\r\n    const p = point(e);\r\n    startX = p.x;\r\n    startY = p.y;\r\n    const t = readTranslate();\r\n    baseX = t.x;\r\n    baseY = t.y;\r\n    moving = true;\r\n    handleEl.style.cursor = spec.cursor || \"grabbing\";\r\n    document.addEventListener(\"mousemove\", onMove, true);\r\n    document.addEventListener(\"mouseup\", onUp, { once: true, capture: true });\r\n    document.addEventListener(\"touchmove\", onMove, {\r\n      passive: false,\r\n      capture: true,\r\n    });\r\n    document.addEventListener(\"touchend\", onUp, { once: true, capture: true });\r\n    surfaceEl.classList.add(\"pj-modal-moved\");\r\n  };\r\n\r\n  handleEl.addEventListener(\"mousedown\", onDown);\r\n  handleEl.addEventListener(\"touchstart\", onDown, { passive: false });\r\n\r\n  return () => {\r\n    handleEl.removeEventListener(\"mousedown\", onDown);\r\n    handleEl.removeEventListener(\"touchstart\", onDown);\r\n  };\r\n}\r\n\r\n/* ---------------- Core contracts ---------------- */\r\n\r\nexport type CoreChrome = {\r\n  windowed: boolean;\r\n  bare?: boolean;\r\n  size?:\r\n    | \"sm\"\r\n    | \"md\"\r\n    | \"lg\"\r\n    | \"fit\"\r\n    | { w?: number | string; h?: number | string };\r\n  surfaceClass?: string;\r\n  contentClass?: string;\r\n};\r\n\r\nexport type CoreBehavior = {\r\n  animate?: boolean;\r\n  closeOnEsc?: boolean;\r\n  closeOnBackdrop?: boolean;\r\n  trapFocus?: boolean;\r\n  ariaLabel?: string;\r\n  draggable?: ModalDraggable;\r\n  onOpen?: (inst: ModalInstance) => void;\r\n  onClose?: (result?: unknown) => void;\r\n  concurrency?: ModalConcurrency;\r\n};\r\n\r\nexport type CoreVisuals = {\r\n  surfaceAlpha?: number;\r\n  dialogBlurPx?: number; // blur on modal surface when translucent\r\n  backdropBlurPx?: number; // blur on overlay\r\n  kind?: NotifyKind;\r\n};\r\n\r\nexport type CoreOptions = CoreChrome & CoreBehavior & CoreVisuals;\r\n\r\nexport type CoreRenderers = {\r\n  renderHeader?: (inst: ModalInstance, headerHost: HTMLDivElement) => void;\r\n  renderBody: (\r\n    inst: ModalInstance,\r\n    bodyHost: HTMLDivElement,\r\n    setContentEl: (el: HTMLElement) => void\r\n  ) => void;\r\n  renderFooter?: (inst: ModalInstance, footerHost: HTMLDivElement) => void;\r\n  setUpdater?: (\r\n    inst: ModalInstance,\r\n    refs: {\r\n      header?: HTMLDivElement | null;\r\n      body: HTMLDivElement;\r\n      footer?: HTMLDivElement | null;\r\n      setContentEl: (el: HTMLElement) => void;\r\n    }\r\n  ) => void;\r\n};\r\n\r\nexport function createSurface(\r\n  core: CoreOptions,\r\n  r: CoreRenderers\r\n): ModalInstance {\r\n  const id = uid(\"modal\");\r\n  const cfg = config.get();\r\n  const animEnabled = core.animate ?? cfg.animation?.enable ?? true;\r\n  const animDur = cfg.animation?.durationMs ?? 180;\r\n  const animEase = cfg.animation?.easing ?? \"ease\";\r\n  const overlayFade = cfg.overlay?.fade ?? true;\r\n\r\n  // roots\r\n  manager.ensureRoots();\r\n\r\n  // DOM refs\r\n  let overlay!: HTMLDivElement;\r\n  let modal!: HTMLDivElement;\r\n  let headerEl: HTMLDivElement | null = null;\r\n  let bodyEl!: HTMLDivElement;\r\n  let footerEl: HTMLDivElement | null = null;\r\n\r\n  // lifecycle\r\n  let isClosing = false;\r\n  let releaseTrap: (() => void) | null = null;\r\n  let restoreAria: (() => void) | null = null;\r\n  let cleanupDrag: (() => void) | null = null;\r\n\r\n  // instance handles\r\n  let _el!: HTMLDivElement;\r\n  let _contentEl!: HTMLElement;\r\n  const instance: ModalInstance = {\r\n    id,\r\n    close: (result?: unknown) => close(result),\r\n    update: () => {\r\n      /* Dialog-only update is implemented in modal.ts via wrapper */\r\n    },\r\n    get el() {\r\n      return _el;\r\n    },\r\n    get contentEl() {\r\n      return _contentEl;\r\n    },\r\n  };\r\n\r\n  let onEsc: ((e: KeyboardEvent) => void) | null = null;\r\n\r\n  const render = () => {\r\n    // overlay\r\n    overlay = document.createElement(\"div\");\r\n    overlay.className = \"pj-overlay\";\r\n    overlay.setAttribute(\"role\", \"presentation\");\r\n    const alpha = cfg.overlay?.surfaceAlpha ?? 0.6;\r\n    overlay.style.setProperty(\"--pj-overlay-alpha\", String(alpha));\r\n    const overlayBlur = core.backdropBlurPx ?? cfg.overlay?.backdropBlurPx ?? 0;\r\n    if (overlayBlur > 0) {\r\n      overlay.classList.add(\"pj-blur\");\r\n      overlay.style.setProperty(\"--pj-overlay-blur\", `${overlayBlur}px`);\r\n    }\r\n\r\n    // modal surface\r\n    modal = document.createElement(\"div\");\r\n    modal.className = core.windowed ? \"pj-modal\" : \"pj-modal-no-window\";\r\n    if (core.bare)\r\n      modal.classList.add(\r\n        \"pad-none\"\r\n      ); /* Add no padding if bare, content can add margin or padding */\r\n\r\n    modal.setAttribute(\"role\", \"dialog\");\r\n    modal.setAttribute(\"aria-modal\", \"true\");\r\n    if (core.ariaLabel) modal.setAttribute(\"aria-label\", core.ariaLabel);\r\n    if (core.kind) modal.classList.add(`pj-kind-${core.kind}`);\r\n    // modal.classList.add(core.windowed ? \"windowed\" : \"nonwindowed\");\r\n\r\n    // visuals (alpha + surface blur)\r\n    const surfaceAlpha = core.surfaceAlpha ?? cfg.modal.surfaceAlpha ?? 1;\r\n    const surfaceBlur = core.dialogBlurPx ?? cfg.modal.dialogBlurPx ?? 0;\r\n    modal.style.setProperty(\"--pj-modal-alpha\", String(surfaceAlpha));\r\n    if (surfaceAlpha < 1 && surfaceBlur > 0) {\r\n      modal.classList.add(\"pj-modal-translucent\");\r\n      modal.style.setProperty(\"--pj-modal-blur\", `${surfaceBlur}px`);\r\n    }\r\n\r\n    // size presets when windowed and string size\r\n    const sz = core.size ?? \"md\";\r\n    if (core.windowed && typeof sz === \"string\") {\r\n      modal.classList.add(`size-${sz}`);\r\n    }\r\n\r\n    // header/body/footer hosts\r\n    if (r.renderHeader) {\r\n      headerEl = document.createElement(\"div\");\r\n      headerEl.className = \"pj-modal-header\";\r\n      modal.appendChild(headerEl);\r\n    }\r\n\r\n    bodyEl = document.createElement(\"div\");\r\n    bodyEl.className = \"pj-modal-content\";\r\n    if (core.bare)\r\n      bodyEl.classList.add(\r\n        \"pad-none\"\r\n      ); /* Add no padding if bare, content can add margin or padding */\r\n    if (core.contentClass) bodyEl.classList.add(core.contentClass);\r\n    modal.appendChild(bodyEl);\r\n\r\n    if (r.renderFooter) {\r\n      footerEl = document.createElement(\"div\");\r\n      footerEl.className = \"pj-modal-footer\";\r\n      modal.appendChild(footerEl);\r\n    }\r\n\r\n    if (core.surfaceClass) modal.classList.add(core.surfaceClass);\r\n\r\n    overlay.appendChild(modal);\r\n    manager.portal.appendChild(overlay);\r\n\r\n    // focus trap & aria hide\r\n    const initial = footerEl?.querySelector(\"button\") as HTMLElement | null;\r\n    if (core.trapFocus !== false) {\r\n      releaseTrap = trapFocus(modal, { initialFocus: initial }).release;\r\n    }\r\n    restoreAria = ariaHideSiblings(overlay);\r\n\r\n    // instance element handles\r\n    _el = modal;\r\n    _contentEl = bodyEl;\r\n\r\n    // renderers\r\n    if (r.renderHeader && headerEl) r.renderHeader(instance, headerEl);\r\n    r.renderBody(instance, bodyEl, (el) => {\r\n      _contentEl = el;\r\n    });\r\n    if (r.renderFooter && footerEl) r.renderFooter(instance, footerEl);\r\n    if (r.setUpdater) {\r\n      r.setUpdater(instance, {\r\n        header: headerEl,\r\n        body: bodyEl,\r\n        footer: footerEl,\r\n        setContentEl: (el) => {\r\n          _contentEl = el;\r\n        }, \r\n      });\r\n    }\r\n\r\n    // dragging\r\n    const drag = core.draggable;\r\n    const prefersCoarse =\r\n      typeof window !== \"undefined\" &&\r\n      window.matchMedia?.(\"(pointer: coarse)\").matches;\r\n    const isMobileUA = /Mobi|Android/i.test(navigator.userAgent);\r\n    const disableOnMobile =\r\n      typeof drag === \"object\" ? drag.disableOnMobile ?? true : true;\r\n\r\n    if (drag && !prefersCoarse && !(isMobileUA && disableOnMobile)) {\r\n      const spec = typeof drag === \"object\" ? drag : {};\r\n      const axis = spec.axis ?? \"both\";\r\n      const withinViewport = spec.withinViewport ?? true;\r\n      const cursor = spec.cursor ?? null;\r\n\r\n      // resolve handle: default header (if exists & windowed), else content/body\r\n      let handleEl: HTMLElement | null = null;\r\n      if (spec.handle instanceof HTMLElement) handleEl = spec.handle;\r\n      else if (typeof spec.handle === \"string\") {\r\n        if (spec.handle === \"header\") handleEl = headerEl ?? null;\r\n        else if (spec.handle === \"body\") handleEl = bodyEl;\r\n        else handleEl = modal.querySelector(spec.handle) as HTMLElement | null;\r\n      } else {\r\n        handleEl = core.windowed ? headerEl ?? modal : _contentEl ?? bodyEl;\r\n      }\r\n\r\n      if (handleEl) {\r\n        cleanupDrag = enableDragging(modal, handleEl, {\r\n          axis,\r\n          withinViewport,\r\n          cursor,\r\n        });\r\n        modal.classList.add(\"pj-modal-draggable\");\r\n        if (cursor) handleEl.style.cursor = cursor;\r\n      }\r\n    }\r\n\r\n    bind();\r\n    manager.scrollLock(true);\r\n\r\n    // open animations\r\n    if (animEnabled) {\r\n      if (overlayFade) {\r\n        overlay.classList.add(\"pj-overlay-in\");\r\n        overlay.style.setProperty(\"--pj-anim-duration\", `${animDur}ms`);\r\n        overlay.style.setProperty(\"--pj-anim-ease\", animEase);\r\n      }\r\n      modal.classList.add(\"pj-modal-in\");\r\n      modal.style.setProperty(\"--pj-anim-duration\", `${animDur}ms`);\r\n      modal.style.setProperty(\"--pj-anim-ease\", animEase);\r\n    }\r\n\r\n    core.onOpen?.(instance);\r\n  };\r\n\r\n  const bind = () => {\r\n    if (core.closeOnBackdrop ?? true) {\r\n      overlay.addEventListener(\"click\", (e) => {\r\n        if (e.target === overlay) close(\"backdrop\");\r\n      });\r\n    }\r\n    if (core.closeOnEsc ?? true) {\r\n      onEsc = (e: KeyboardEvent) => {\r\n        if (e.key === \"Escape\") {\r\n          e.stopPropagation();\r\n          close(\"esc\");\r\n          document.removeEventListener(\"keydown\", onEsc as any, true);\r\n        }\r\n      };\r\n      document.addEventListener(\"keydown\", onEsc, true);\r\n    }\r\n  };\r\n\r\n  const teardown = (result?: unknown) => {\r\n    overlay.remove();\r\n    manager.onClose();\r\n    manager.scrollLock(false);\r\n    try {\r\n      releaseTrap?.();\r\n    } catch {}\r\n    try {\r\n      restoreAria?.();\r\n    } catch {}\r\n    try {\r\n      cleanupDrag?.();\r\n    } catch {}\r\n    releaseTrap = restoreAria = cleanupDrag = null;\r\n    try {\r\n      document.removeEventListener(\"keydown\", onEsc as any, true);\r\n    } catch {}\r\n    core.onClose?.(result);\r\n  };\r\n\r\n  const close = (result?: unknown) => {\r\n    if (isClosing) return;\r\n    isClosing = true;\r\n\r\n    if (!animEnabled) {\r\n      teardown(result);\r\n      return;\r\n    }\r\n\r\n    modal.classList.remove(\"pj-modal-in\");\r\n    modal.classList.add(\"pj-modal-out\");\r\n    modal.style.setProperty(\"--pj-anim-duration\", `${animDur}ms`);\r\n    modal.style.setProperty(\"--pj-anim-ease\", animEase);\r\n\r\n    if (overlayFade) {\r\n      overlay.classList.remove(\"pj-overlay-in\");\r\n      overlay.classList.add(\"pj-overlay-out\");\r\n      overlay.style.setProperty(\"--pj-anim-duration\", `${animDur}ms`);\r\n      overlay.style.setProperty(\"--pj-anim-ease\", animEase);\r\n    }\r\n\r\n    let doneModal = false;\r\n    let doneOverlay = !overlayFade;\r\n    const tryDone = () => {\r\n      if (doneModal && doneOverlay) teardown(result);\r\n    };\r\n\r\n    const onModalEnd = () => {\r\n      doneModal = true;\r\n      modal.removeEventListener(\"animationend\", onModalEnd);\r\n      tryDone();\r\n    };\r\n    modal.addEventListener(\"animationend\", onModalEnd);\r\n\r\n    if (overlayFade) {\r\n      const onOverlayEnd = () => {\r\n        doneOverlay = true;\r\n        overlay.removeEventListener(\"animationend\", onOverlayEnd);\r\n        tryDone();\r\n      };\r\n      overlay.addEventListener(\"animationend\", onOverlayEnd);\r\n    }\r\n\r\n    window.setTimeout(tryDone, (animDur ?? 0) + 50);\r\n  };\r\n\r\n  // Orchestrate via manager (queue/reject handled there already)\r\n  manager.open(() => render());\r\n\r\n  return instance;\r\n}\r\n","/**\r\n * PromptJS  toast.ts\r\n * Edge notifications with per-position slots, behavior (stack|queue|replace),\r\n * enter/exit animations, and a timeout progress cue.\r\n *\r\n * Uses Manager's toast slots/queues; does not affect modals.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n */\r\n\r\nimport { manager } from \"./manager\";\r\nimport { config } from \"./config\";\r\nimport { sanitize } from \"./sanitize\";\r\nimport type {\r\n  ToastOptions,\r\n  ToastPosition,\r\n  ToastBehavior,\r\n  ToastAnimations,\r\n  ToastAnimSpec,\r\n} from \"./types\";\r\n\r\ntype Phase = \"enter\" | \"exit\";\r\n\r\nfunction px(v: number | string): string {\r\n  return typeof v === \"number\" ? `${v}px` : v;\r\n}\r\n\r\nfunction prefersReducedMotion(): boolean {\r\n  return (\r\n    typeof window !== \"undefined\" &&\r\n    !!window.matchMedia &&\r\n    window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\r\n  );\r\n}\r\n\r\nfunction removeMatchingClasses(el: Element, re: RegExp) {\r\n  el.classList.forEach((cls) => {\r\n    if (re.test(cls)) el.classList.remove(cls);\r\n  });\r\n}\r\n\r\n/** Wait for a CSS animation to end; falls back to a timer. Returns a canceller. */\r\nfunction onceAnimationEnd(\r\n  el: HTMLElement,\r\n  expectedMs: number,\r\n  done: () => void\r\n): () => void {\r\n  let called = false;\r\n  const onEnd = (ev: AnimationEvent) => {\r\n    if (ev.target === el && !called) {\r\n      called = true;\r\n      el.removeEventListener(\"animationend\", onEnd);\r\n      clearTimeout(timer);\r\n      done();\r\n    }\r\n  };\r\n  const timer = window.setTimeout(() => {\r\n    if (!called) {\r\n      called = true;\r\n      el.removeEventListener(\"animationend\", onEnd);\r\n      done();\r\n    }\r\n  }, Math.max(0, expectedMs) + 50);\r\n  el.addEventListener(\"animationend\", onEnd);\r\n  return () => {\r\n    if (!called) {\r\n      called = true;\r\n      clearTimeout(timer);\r\n      el.removeEventListener(\"animationend\", onEnd);\r\n      done();\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Resolve an animation spec against a position:\r\n * - direction: 'auto' becomes a concrete edge\r\n * - distance: 'edge' becomes '120%' (off-screen enough)\r\n * - duration/easing: from spec or global config.animation\r\n */\r\nfunction resolveAnim(\r\n  position: ToastPosition,\r\n  phase: Phase,\r\n  spec?: ToastAnimSpec\r\n): {\r\n  preset: \"fade\" | \"slide\" | \"scale\";\r\n  direction?: \"up\" | \"down\" | \"left\" | \"right\";\r\n  distance?: string;\r\n  durationMs: number;\r\n  easing: string;\r\n} {\r\n  const cfg = config.get();\r\n  const baseDur = cfg.animation?.durationMs ?? 180;\r\n  const baseEase = cfg.animation?.easing ?? \"ease\";\r\n\r\n  if (!spec) {\r\n    const def =\r\n      phase === \"enter\"\r\n        ? {\r\n            preset: \"slide\" as \"slide\",\r\n            direction: autoDirection(position, phase),\r\n            distance: defaultDistance(position, phase),\r\n          }\r\n        : { preset: \"fade\" as \"fade\" };\r\n    return {\r\n      preset: def.preset,\r\n      direction: (def as any).direction,\r\n      distance: (def as any).distance,\r\n      durationMs: baseDur,\r\n      easing: baseEase,\r\n    };\r\n  }\r\n\r\n  const preset = spec.preset;\r\n  const dir =\r\n    preset === \"slide\"\r\n      ? spec.direction && spec.direction !== \"auto\"\r\n        ? spec.direction\r\n        : autoDirection(position, phase)\r\n      : undefined;\r\n\r\n  let distance: string | undefined;\r\n  if (preset === \"slide\") {\r\n    if (spec.distance === \"edge\" || spec.distance === undefined) {\r\n      distance = defaultDistance(position, phase);\r\n    } else {\r\n      distance = px(spec.distance);\r\n    }\r\n  }\r\n\r\n  return {\r\n    preset,\r\n    direction: dir,\r\n    distance,\r\n    durationMs: spec.durationMs ?? baseDur,\r\n    easing: spec.easing ?? baseEase,\r\n  };\r\n}\r\n\r\n/** Direction denotes the edge the toast comes from (enter) or goes to (exit). */\r\nfunction autoDirection(\r\n  position: ToastPosition,\r\n  phase: Phase\r\n): \"up\" | \"down\" | \"left\" | \"right\" {\r\n  switch (position) {\r\n    case \"top-center\":\r\n      return phase === \"enter\" ? \"up\" : \"up\";\r\n    case \"bottom-center\":\r\n      return phase === \"enter\" ? \"down\" : \"down\";\r\n    case \"top-left\":\r\n    case \"bottom-left\":\r\n      return \"left\";\r\n    case \"top-right\":\r\n    case \"bottom-right\":\r\n      return \"right\";\r\n  }\r\n}\r\n\r\n/** Default movement distance: centers use subtle on enter and off-screen on exit; corners off-screen both. */\r\nfunction defaultDistance(position: ToastPosition, phase: Phase): string {\r\n  const offscreen = \"120%\";\r\n  const subtle = \"16px\";\r\n  if (position === \"top-center\") return phase === \"enter\" ? subtle : offscreen;\r\n  if (position === \"bottom-center\")\r\n    return phase === \"enter\" ? subtle : offscreen;\r\n  return offscreen;\r\n}\r\n\r\nfunction applyAnim(\r\n  el: HTMLElement,\r\n  phase: Phase,\r\n  resolved: ReturnType<typeof resolveAnim>\r\n) {\r\n  // Always set base vars for consistency\r\n  el.style.setProperty(\"--pj-anim-duration\", `${resolved.durationMs}ms`);\r\n  el.style.setProperty(\"--pj-anim-ease\", resolved.easing);\r\n\r\n  if (resolved.preset === \"fade\") {\r\n    el.classList.add(phase === \"enter\" ? \"pj-enter-fade\" : \"pj-exit-fade\");\r\n    return;\r\n  }\r\n\r\n  if (resolved.preset === \"scale\") {\r\n    el.classList.add(phase === \"enter\" ? \"pj-enter-scale\" : \"pj-exit-scale\");\r\n    return;\r\n  }\r\n\r\n  if (resolved.preset === \"slide\" && resolved.direction) {\r\n    if (phase === \"enter\" && resolved.distance) {\r\n      // Only enter uses the variable distance (exit generally heads to edge)\r\n      el.style.setProperty(\"--pj-enter-distance\", resolved.distance);\r\n    }\r\n    const cls = `pj-${phase}-slide-${resolved.direction}`;\r\n    el.classList.add(cls);\r\n  }\r\n}\r\n\r\nfunction addTimeoutCue(\r\n  el: HTMLElement,\r\n  animations: ToastAnimations,\r\n  timeoutMs?: number\r\n) {\r\n  if (!timeoutMs || timeoutMs <= 0) return;\r\n\r\n  const cue = animations.timeoutCue || {};\r\n  const show = cue.show !== false;\r\n  if (!show) return;\r\n\r\n  const pos = cue.position || \"bottom\";\r\n  const thickness = cue.thicknessPx ?? 3;\r\n\r\n  // Cover mode\r\n  if (pos === \"cover\") {\r\n    const cover = document.createElement(\"div\");\r\n    cover.className = \"pj-timeout-cover\";\r\n    cover.style.setProperty(\"--pj-timeout-ms\", `${timeoutMs}ms`);\r\n    if (cue.direction === \"shrink\") cover.style.animationDirection = \"reverse\";\r\n    el.appendChild(cover);\r\n    return;\r\n  }\r\n\r\n  // Edge bar mode\r\n  const bar = document.createElement(\"div\");\r\n  bar.className = `pj-timeout-bar pj-${pos}`;\r\n  bar.style.setProperty(\"--pj-timeout-ms\", `${timeoutMs}ms`);\r\n  if (pos === \"top\" || pos === \"bottom\") {\r\n    bar.style.height = `${thickness}px`;\r\n  } else {\r\n    bar.style.width = `${thickness}px`;\r\n  }\r\n  if (cue.direction === \"shrink\") bar.style.animationDirection = \"reverse\";\r\n  el.appendChild(bar);\r\n}\r\n\r\n/* ------------------------------------------------------------------\r\n   Container collapse (post-exit) to avoid stack \"jump\"\r\n-------------------------------------------------------------------*/\r\n\r\nfunction collapseAndRemove(\r\n  container: HTMLElement,\r\n  position: ToastPosition,\r\n  durationMs: number,\r\n  easing: string\r\n) {\r\n  // If animations disabled or reduced motion, just remove container\r\n  if (\r\n    prefersReducedMotion() ||\r\n    durationMs <= 0 ||\r\n    !config.get().animation?.enable\r\n  ) {\r\n    container.remove();\r\n    manager.onToastRemoved(position);\r\n    return;\r\n  }\r\n\r\n  const startH = container.offsetHeight;\r\n  container.style.overflow = \"hidden\";\r\n  container.style.height = `${startH}px`;\r\n  container.style.marginTop = getComputedStyle(container).marginTop;\r\n  container.style.marginBottom = getComputedStyle(container).marginBottom;\r\n  container.style.paddingTop = getComputedStyle(container).paddingTop;\r\n  container.style.paddingBottom = getComputedStyle(container).paddingBottom;\r\n\r\n  // Force reflow to lock the starting values\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n  (container as any).offsetWidth;\r\n\r\n  container.style.transition = [\r\n    `height ${durationMs}ms ${easing}`,\r\n    `margin ${durationMs}ms ${easing}`,\r\n    `padding ${durationMs}ms ${easing}`,\r\n    `opacity ${durationMs}ms ${easing}`,\r\n  ].join(\", \");\r\n  container.style.height = \"0px\";\r\n  container.style.marginTop = \"0px\";\r\n  container.style.marginBottom = \"0px\";\r\n  container.style.paddingTop = \"0px\";\r\n  container.style.paddingBottom = \"0px\";\r\n  container.style.opacity = \"0\";\r\n\r\n  const done = () => {\r\n    container.removeEventListener(\"transitionend\", done);\r\n    container.remove();\r\n    manager.onToastRemoved(position);\r\n  };\r\n  container.addEventListener(\"transitionend\", done);\r\n  // Safety in case transitionend is swallowed\r\n  window.setTimeout(done, durationMs + 50);\r\n}\r\n\r\n/* ------------------------------------------------------------------\r\n   Unified exit (timeout & button) -> then container collapse\r\n-------------------------------------------------------------------*/\r\n\r\nfunction beginExit(\r\n  toastEl: HTMLElement,\r\n  container: HTMLElement,\r\n  position: ToastPosition,\r\n  userExitSpec?: ToastAnimSpec\r\n) {\r\n  if ((toastEl as any)._pjExiting) return;\r\n  (toastEl as any)._pjExiting = true;\r\n\r\n  // Remove any lingering enter-* so exit can trigger\r\n  removeMatchingClasses(toastEl, /^pj-enter-/);\r\n\r\n  const cfg = config.get();\r\n  const animEnabled = !!cfg.animation?.enable;\r\n  const exitResolved = resolveAnim(\r\n    position,\r\n    \"exit\",\r\n    userExitSpec ?? cfg.toast.animations.exit\r\n  );\r\n\r\n  if (!animEnabled || prefersReducedMotion() || exitResolved.durationMs <= 0) {\r\n    // No motion: collapse container immediately\r\n    collapseAndRemove(container, position, 0, exitResolved.easing);\r\n    return;\r\n  }\r\n\r\n  // Apply exit animation to the toast element\r\n  applyAnim(toastEl, \"exit\", exitResolved);\r\n\r\n  // Force a reflow so class changes are recognized as a new animation\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n  (toastEl as any).offsetWidth;\r\n\r\n  // Wait for exit anim to complete, then collapse the container\r\n  onceAnimationEnd(toastEl, exitResolved.durationMs, () => {\r\n    collapseAndRemove(\r\n      container,\r\n      position,\r\n      exitResolved.durationMs,\r\n      exitResolved.easing\r\n    );\r\n  });\r\n}\r\n\r\n/* ------------------------------------------------------------\r\n   Public API\r\n-------------------------------------------------------------*/\r\n\r\nexport function toast(opts: ToastOptions): { dismiss: () => void } {\r\n  manager.ensureRoots();\r\n\r\n  const cfg = config.get();\r\n  const pos: ToastPosition = opts.position || cfg.toast.defaultPosition;\r\n  const behavior: ToastBehavior = opts.behavior || cfg.toast.behavior;\r\n  const maxVisible = opts.maxVisible || cfg.toast.maxVisible;\r\n\r\n  const timeoutMs = opts.timeoutMs ?? cfg.toast.defaultTimeoutMs;\r\n\r\n  //  Container (floats in the slot; collapses after exit) \r\n  const container = document.createElement(\"div\");\r\n  container.className = \"pj-toast-item\";\r\n\r\n  // Base toast element (animates in/out inside the container)\r\n  const el = document.createElement(\"div\");\r\n  el.className = `pj-toast pj-${opts.kind || \"info\"} ${\r\n    opts.dismissible ?? cfg.toast.defaultDismissible ? \"dismissible\" : \"\"\r\n  }`;\r\n  el.setAttribute(\"role\", \"status\");\r\n  el.setAttribute(\"aria-live\", \"polite\");\r\n\r\n  // Title (optional)\r\n  let contentContainer = el;\r\n  let titleId: string | undefined;\r\n  if (opts.title) {\r\n    const h = document.createElement(\"div\");\r\n    h.className = \"pj-toast-title\";\r\n    h.innerHTML = sanitize(opts.title);\r\n    titleId = `pj-title-${Math.random().toString(36).slice(2, 9)}`;\r\n    h.id = titleId;\r\n    el.appendChild(h);\r\n    el.classList.add(\"has-title\");\r\n\r\n    // Wrap body+actions in a container for layout, body and actions appear side by side\r\n    contentContainer = document.createElement(\"div\");\r\n    contentContainer.style.cssText = \"display: flex; align-items: center; gap: 6px;\";\r\n    el.appendChild(contentContainer);\r\n  }\r\n\r\n  // Content\r\n  const body = document.createElement(\"div\");\r\n  body.className = \"pj-toast-body\";\r\n  body.innerHTML = sanitize(opts.message);\r\n  const bodyId = `pj-body-${Math.random().toString(36).slice(2, 9)}`;\r\n  body.id = bodyId;\r\n  contentContainer.appendChild(body);\r\n\r\n  // ARIA: prefer labelled-by (title) + described-by (body) if available\r\n  if (titleId) {\r\n    el.setAttribute(\"aria-labelledby\", titleId);\r\n    el.setAttribute(\"aria-describedby\", bodyId);\r\n  }\r\n\r\n  // Actions (optional)\r\n  if (opts.actions?.length) {\r\n    const bar = document.createElement(\"div\");\r\n    bar.className = \"pj-toast-actions\";\r\n    for (const a of opts.actions) {\r\n      const btn = document.createElement(\"button\");\r\n      btn.className = \"pj-toast-btn ghost\";\r\n      btn.textContent = a.text;\r\n      // Clicking any action also dismisses the toast\r\n      btn.addEventListener(\"click\", () =>\r\n        beginExit(el, container, pos, opts.animations?.exit)\r\n      );\r\n      btn.addEventListener(\"click\", () => {\r\n        try {\r\n          a.onClick?.();\r\n        } catch {}\r\n      });\r\n      bar.appendChild(btn);\r\n    }\r\n    contentContainer.appendChild(bar);\r\n  }\r\n\r\n  // Dismiss button\r\n  const dismissible = opts.dismissible ?? cfg.toast.defaultDismissible;\r\n  if (dismissible) {\r\n    const x = document.createElement(\"button\");\r\n    x.className = \"pj-toast-close\";\r\n    x.setAttribute(\"aria-label\", cfg.i18n.dismiss);\r\n    x.innerHTML =\r\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" ' +\r\n      'fill=\"none\" stroke=\"currentColor\" stroke-width=\"4\" aria-hidden=\"true\">' +\r\n      '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18 18 6M6 6l12 12\"/></svg>';\r\n    x.addEventListener(\"click\", () =>\r\n      beginExit(el, container, pos, opts.animations?.exit)\r\n    );\r\n    el.appendChild(x);\r\n  }\r\n\r\n  // Timeout auto-dismiss and visual cue\r\n  let timer: number | undefined;\r\n  if (timeoutMs && timeoutMs > 0) {\r\n    addTimeoutCue(el, opts.animations || cfg.toast.animations, timeoutMs);\r\n    timer = window.setTimeout(\r\n      () => beginExit(el, container, pos, opts.animations?.exit),\r\n      timeoutMs\r\n    );\r\n  }\r\n\r\n  // Enter animation on the toast element\r\n  const enterResolved = resolveAnim(\r\n    pos,\r\n    \"enter\",\r\n    (opts.animations && opts.animations.enter) || cfg.toast.animations.enter\r\n  );\r\n  const animEnabled = !!cfg.animation?.enable;\r\n\r\n  if (!prefersReducedMotion() && animEnabled && enterResolved.durationMs > 0) {\r\n    applyAnim(el, \"enter\", enterResolved);\r\n    // Clean enter classes after they complete, so exit always re-triggers\r\n    onceAnimationEnd(el, enterResolved.durationMs, () => {\r\n      removeMatchingClasses(el, /^pj-enter-/);\r\n    });\r\n  }\r\n\r\n  // Compose container\r\n  container.appendChild(el);\r\n\r\n  // Mount through Manager (container is the unit in the slot)\r\n  manager.showToast(container, pos, behavior, maxVisible);\r\n\r\n  // Controller\r\n  return {\r\n    dismiss: () => {\r\n      if (timer) window.clearTimeout(timer);\r\n      beginExit(el, container, pos, opts.animations?.exit);\r\n    },\r\n  };\r\n}\r\n\r\n// Temporary alias to ease migration; document toast() as the primary API\r\nexport const notify = toast;\r\n","/**\r\n * PromptJS  question.ts\r\n * Promise-based dialogs built on the modal primitive.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n *\r\n * APIs:\r\n *   - question(opts): fully configurable buttons; resolves { id } of the chosen action\r\n *   - confirm(message, opts?): convenience wrapper resolving boolean\r\n *   - alert(message, opts?): convenience wrapper that resolves on acknowledge\r\n *\r\n * Extras:\r\n *   - Map ESC/backdrop to specific return IDs via `escReturns` / `backdropReturns`\r\n *   - Uses modal button plumbing; no direct DOM markup required by callers\r\n */\r\n\r\nimport { open } from './modal';\r\nimport { config } from './config';\r\nimport type { QuestionOptions, ConfirmOptions, AlertOptions } from './types';\r\n\r\nexport async function question(opts: {\r\n  title?: string;\r\n  message: string;\r\n  buttons: Array<{ id: string; text: string; variant?: 'primary'|'neutral'|'danger' }>;\r\n  defaultId?: string;\r\n  escReturns?: string | null;\r\n  backdropReturns?: string | null;\r\n}): Promise<{ id: string }> {\r\n  return new Promise((resolve) => {\r\n    const m = open({\r\n      title: opts.title,\r\n      content: opts.message,\r\n      buttons: opts.buttons.map(b => ({\r\n        ...b,\r\n        closeOnClick: true,\r\n        onClick: () => resolve({ id: b.id }),\r\n      })),\r\n      closeOnEsc: opts.escReturns !== null,\r\n      closeOnBackdrop: opts.backdropReturns !== null,\r\n      onClose: (r) => {\r\n        if (r === 'esc' && opts.escReturns) resolve({ id: opts.escReturns });\r\n        else if (r === 'backdrop' && opts.backdropReturns) resolve({ id: opts.backdropReturns });\r\n      }\r\n    });\r\n    // default focus can be added later\r\n  });\r\n}\r\n\r\nexport async function confirm(message: string, extra?: Partial<Parameters<typeof question>[0]>): Promise<boolean> {\r\n  const { id } = await question({\r\n    message,\r\n    title: extra?.title,\r\n    buttons: [\r\n      { id: 'yes', text: (extra as any)?.yesText ?? 'Yes', variant: 'primary' },\r\n      { id: 'no', text: (extra as any)?.noText ?? 'No', variant: 'neutral' },\r\n      ...(extra && (extra as any).includeCancel ? [{ id: 'cancel', text: 'Cancel' as const }] : []),\r\n    ] as any,\r\n    escReturns: 'cancel',\r\n    backdropReturns: 'cancel',\r\n  });\r\n  return id === 'yes';\r\n}\r\n\r\nexport async function alert(message: string, opts?: { title?: string }): Promise<void> {\r\n  await new Promise<void>((resolve)=> {\r\n    open({\r\n      title: opts?.title,\r\n      content: message,\r\n      buttons: [{ id:'ok', text: config.get().i18n.ok, variant:'primary', onClick: ()=>resolve() }],\r\n      closeOnEsc: true,\r\n      closeOnBackdrop: true,\r\n    });\r\n  });\r\n}\r\n","/**\r\n * PromptJS  i18n.ts\r\n * Locale registry and helpers so apps can switch language with one call.\r\n * This updates config.i18n and deep-merges default dialog titles.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n */\r\n\r\nimport { config } from './config';\r\nimport type { I18nBundle } from './types';\r\n\r\nconst registry = new Map<string, I18nBundle>();\r\n\r\nexport function register(bundle: I18nBundle) {\r\n  registry.set(bundle.locale, bundle);\r\n}\r\n\r\nexport function getAvailable(): string[] {\r\n  return Array.from(registry.keys());\r\n}\r\n\r\n/**\r\n * Set the active language. The bundle must be registered first\r\n * (or pass the bundle via use()).\r\n */\r\nexport function set(locale: string) {\r\n  const pack = registry.get(locale);\r\n  if (!pack) throw new Error(`PromptJS: no i18n pack registered for \"${locale}\"`);\r\n  // Let config.update handle deep merge of i18n and i18n.titles\r\n  config.update({ i18n: pack });\r\n}\r\n\r\n/**\r\n * Convenience: register and set in one call.\r\n */\r\nexport function use(locale: string, bundle?: I18nBundle) {\r\n  if (bundle) register(bundle);\r\n  set(locale);\r\n}\r\n\r\n/**\r\n * Load a locale asynchronously (for JSON or code-split modules),\r\n * then register and set it. Returns the loaded bundle.\r\n */\r\nexport function load(locale: string, loader: () => Promise<I18nBundle>) {\r\n  return loader().then(bundle => {\r\n    register(bundle);\r\n    set(locale);\r\n    return bundle;\r\n  });\r\n}\r\n\r\n// Optional: pre-register English so you can switch back explicitly.\r\nregister({\r\n  locale: 'en',\r\n  dir: 'auto',\r\n  ok: 'OK',\r\n  cancel: 'Cancel',\r\n  yes: 'Yes',\r\n  no: 'No',\r\n  close: 'Close',\r\n  dismiss: 'Dismiss',\r\n  titles: {\r\n    info: 'Information',\r\n    success: 'Success',\r\n    warning: 'Warning',\r\n    error: 'Error',\r\n    question: 'Question',\r\n  },\r\n});\r\n","/**\r\n * PromptJS  index.ts\r\n * Entry point for the public API.\r\n * Author: Iftekhar Mahmud Towhid (tlabs.im@gmail.com)\r\n *\r\n * - ESM: re-exports config, Modal, notify, question, confirm, alert, and types.\r\n * - UMD (when bundled): attaches a global `window.PromptJS` for Blade/vanilla usage.\r\n * - No side effects beyond optional global attach when `window` is present.\r\n */\r\n\r\nimport { config } from './config';\r\nimport * as Modal from './modal';\r\nimport { toast } from './toast';\r\nimport { question, confirm, alert } from './dialogs';\r\nimport * as i18n from './i18n';\r\n\r\ndeclare const __PROMPTJS_VERSION__: string | undefined;\r\n\r\nexport const version =\r\n  typeof __PROMPTJS_VERSION__ !== 'undefined'\r\n    ? __PROMPTJS_VERSION__\r\n    : 'dev';\r\n\r\nexport { config, Modal, toast, question, confirm, alert, i18n };\r\nexport type { ModalOptions, ModalInstance } from \"./types\";\r\n\r\ndeclare global { interface Window { PromptJS?: any } }\r\n\r\nif (typeof window !== 'undefined') {\r\n  const api = { config, Modal, toast, question, confirm, alert, i18n, version } as const;\r\n  window.PromptJS = Object.freeze(api);\r\n}\r\n"]}